WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.stiltsoft.confluence.plugin.tablefilter.tablefilter:editor-extensions~tablefilter~test~tf-editor-gen-res', location = 'build/editor-extensions~tablefilter~test~tf-editor.js' */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{10:function(e,t,a){"use strict";a(59);var l=a(6),i=a(23),r=a(8),s=a.n(r),o=a(0),n=a(2),c=a(13),d=a.n(c);a(60);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=function(e){var t=this;if(t.editorMacro=e.editorMacro,t.macroParams=e.macroParams,t.pageId=e.pageId,t.macroId=e.id,t.showNRows=e.showNRows,t.numbering=!!e.numbering&&e.numbering.toLocaleLowerCase(),t.dateFormat=(e.datepattern||"yy-mm-dd").replace("yyyy","yy"),t.localeDateFormat=o.a.getLocaleDateFormat(t.dateFormat),t.separator=e.separator,t.fixedRows="true"==e.limitHeight?1:e.limitHeight,t.fixedCols=e.fixedCols,t.heightValue=!!e.heightValue&&parseInt(e.heightValue),t.sorts=e.sorts,t.totalRow=e.totalrow?e.totalrow.split(","):[],t.totalCol=e.totalcol,t.cbState=null,t.tdNumbers=null,t.tables=null,t.rows=null,t.outerWrapper=$('.tablefilter-outer-wrapper[data-id="'+t.macroId+'"][data-pageid="'+t.pageId+'"][data-sessionid="'+e.sessionId+'"]'),t.tableWrapper=t.editorMacro?t.editorMacro.find(".tablefilter-table-wrapper"):t.outerWrapper.find("div#tf-table-"+t.macroId),t.tableWrapper=o.a.addExcerpt(t.tableWrapper,"tablefilter-table-wrapper"),t.tableWrapper=o.a.addIframe(t.tableWrapper,"tablefilter-table-wrapper",(function(e){t.tableWrapper=e,t.getTable(),t.addNumbering(),t.setFiltrationPanel(),t.tableUpdated=!0,t.filterTable()})),t.comboBoxDiv=t.outerWrapper.find("#comboBoxDiv-"+t.macroId),t.lockDisabled=t.comboBoxDiv.find("div.lockDisabled"),t.lockEnabled=t.comboBoxDiv.find("div.lockEnabled"),t.showBtn=t.outerWrapper.children(".tf-shower-wrapper").find(".tf-shower"),t.rawTables=null,t.columns=null,t.locale=o.a.getLocale(),t.hideParamName=t.pageId+"_"+t.macroId+"_hidden",t.menu=t.comboBoxDiv.find("#filter-menu-view-"+t.macroId+"-"+t.pageId+",#filter-menu-view-lock-"+t.macroId+"-"+t.pageId),t.saveBtn=t.menu.find(".filter-save").not("body.content-preview .filter-save"),t.resetSortBtn=t.menu.find(".filter-sort-reset"),t.isLockEnabled=e.isLockEnabled,t.tabs=e.tabs,t.worklog=o.a.getWorklog(e.worklog),t.sparkline=e.sparkline,t.sparkName="$sparkName"==e.sparkName?"":e.sparkName,t.isAND="OR"!=e.isOR,t.ddSeparator=e.ddSeparator,t.totalRows=[],t.tableUpdated=!0,t.outerWrapper.data("tf",t),t.shouldUpdateSelectOptions=e.updateSelectOptions,t.totalColName=e.totalColName,t.totalRowName=e.totalRowName,t.formatDecimal=s()({mark:t.separator,thousand:e.thousandSeparator!==t.separator?e.thousandSeparator:" "}),t.spakLinesFinished=!0,t.isCloud=t.outerWrapper.hasClass("tf-cloud-macro"),0==t.tableWrapper.length)return null;t.fixURIHash(),t.orderFilters(e.order),t.getTable(),t.sortTable(),t.addNumbering(),t.appendTotalCol(),t.createSelects(t.comboBoxDiv),t.createDatePickers(t.comboBoxDiv),t.bindInputs(),t.bindReset(),t.bindDisable(),t.bindDOMChange(),t.bindInnerFiltration(),t.bindHideBtn(),t.bindAddFilter(),t.bindChangeSettings(),t.bindSave(),t.bindExport(),t.bindSortReset(),t.bindCopyUrl(),t.bindGetUrlValues(),t.bindMakeInverse(),t.bindChangeLabel(),t.setFiltrationPanel(),t.makeSortable(),t.makeResizable(t.comboBoxDiv),t.filterTable(),t.makeTablesScrollable(),!t.editorMacro&&window.KarmaUser&&t.tables.find("a[data-username]").length&&setTimeout((function(){t.setFiltrationPanel(),t.filterTable()}),1e3)};function u(e){void 0!==this.total?this.total=o.a.multFloats(e,this.total):this.total=e}function b(e){this.total?this.total=o.a.addFloats(e,this.total):this.total=e}function h(e){null!=this.sum?(this.sum=o.a.addFloats(e,this.sum),this.count++):(this.sum=e,this.count=1),this.total=this.sum/this.count}function m(e){null!=this.total?this.total=Math.min(e,this.total):this.total=e}function v(e){null!=this.total?this.total=Math.max(e,this.total):this.total=e}function g(){null!=this.total?this.total++:this.total=1}function w(e){var t=2,a=Math.abs(e);a<1&&a>0&&(t=Math.ceil(Math.log(a)/Math.LN10*-1)+2);var l=Math.pow(10,t);return Math.round(e*l)/l}function y(e){return e.hasClass("selectfilter-element")?"Dropdown Filter":e.hasClass("userfilter-element")?"Free Text Filter":e.hasClass("numberfilter-element")?"Number Filter":e.hasClass("datefilter-element")?"Date Filter":e.hasClass("iconfilter-element")?"Icon Filter":e.hasClass("globalfilter-element")?"Global Filter":e.hasClass("columnhider-element")?"Hide Columns":void 0}f.prototype.orderFilters=function(e){if(e){var t=this.comboBoxDiv.find(".sortable-container");t.append(t.find(".iconfilter-element"));for(var a=t.find(".filter-container"),l=e.split(","),i=0;i<l.length;i++)t.append(a.eq($.inArray(i.toString(),l)))}},f.prototype.sortTable=function(){var e=this;function t(){e.sortOneTable($(this))}e.tables.bind("tablesorter-initialized.tf",(function(){var t=$(this),a=o.a.getTablesorterDateFormat(e.dateFormat);a&&t.find("thead th").addClass("dateFormat-"+a),t.append(t.children("div.resize-sensor"))})),e.sorts.length&&(e.tables.filter(".pivot-table-result").one("pivot-sorted",t),e.tables.not(".pivot-table-result").one("tablesorter-initialized.tf",t),e.tables.filter(".tablesorter").each(t))},f.prototype.sortTables=function(){var e=this;e.tables.each((function(){e.sortOneTable($(this))}))},f.prototype.sortOneTable=function(e){var t=this;if(t.sorts.length){var a=[];if($.each(t.sorts,(function(l,i){var r=-1===(i=i.replace(" (‍Asc)"," ⇧").replace(" (‍Desc)"," ⇩")).indexOf("⇧")?1:0,s=i.replace("⇧","").replace("⇩","").trim();o.a.getColumnPositions(t.rows[t.tables.index(e)],s).forEach((function(e){a.push([e,r])}))})),0===a.length)return void t.prepareExport(!0);t.sortWait=!0,t.resorting=!0,t.setMutationObserver(),e.hasClass("pivot-table-result")||t.updateSorter(e),t.restoreNumbering=!0,e.trigger("sorton",[a]),t.resorting=!1,t.resetSortBtn.addClass("tf-disabled-link"),t.setMutationObserver()}},f.prototype.normalizeTable=function(){var e=this;e.pauseUpdate=!0,e.setMutationObserver(!0),o.a.normalizeTable(e.tables),e.pauseUpdate=!1,e.setMutationObserver(!0),o.a.processMergedCells(e.tables.not(".pivot-table-result"))},f.prototype.addNumbering=function(){var e=this;o.a.hasLoadingContent(e.tableWrapper)||(e.numbering?(e.pauseUpdate=!0,e.setMutationObserver(),e.tables.each((function(t){var a=$(this),l=a.find("tr.pivot-header:eq(0)");0==l.find(".tf-numbering").length&&l.prepend('<th class="confluenceTh tf-numbering" rowspan="2"/>');var i,r=e.rows[t];0==a.find("colgroup col.tfn").length&&(i=a.hasClass("relative-table")?"0.1%":29+8*((""+r.length).length-1)+"px",a.find("colgroup").prepend('<col class="tfn synchrony-exclude" style="width: '+i+'"> '));r.each((function(a){for(var l=$(this),i=this.children,s=null,n=null,c=0;c<i.length;c++)if(!i[c].classList.contains("fake")){s=$(i[c]);break}i[0].classList.contains("tf-numbering")&&(n=$(i[0]));var d=s.attr("class");if(0===a)n?n.attr("contenteditable",!1):("th"===s.prop("tagName").toLowerCase()?l.prepend('<th class="'+d+' tf-numbering synchrony-exclude" contenteditable="false"/>'):l.prepend('<td class="'+d+' tf-numbering synchrony-exclude" contenteditable="false"/>'),e.rawTables[t][a].unshift(""),e.columns=o.a.getColumns(e.rawTables),e.rawIconTables&&e.rawIconTables[t][a].unshift(""));else{var p=-1!==e.numbering.indexOf("desc")?r.length-a:a;n?(n.attr("contenteditable",!1).html("<span>"+p+"</span>"),e.rawTables[t][a][0]=""+p):(l.prepend('<td class="'+d+' tf-numbering synchrony-exclude" contenteditable="false"><span>'+p+"</span></td>"),e.rawTables[t][a].unshift(""+p),e.rawIconTables&&e.rawIconTables[t][a].unshift(""))}})),e.updateSorter(a,!0),a.hasClass("metadata-summary-macro")&&e.tableWrapper.find("ol.aui-nav").eq(t).find("li a[href]").one("mouseup",(function(){e.pauseUpdate=!0,a.find(".tf-numbering").remove(),a[0].config&&a[0].config.headerContent&&a[0].config.headerContent.splice(0,1),a.trigger("updateAll",!1),e.pauseUpdate=!1}))})),e.pauseUpdate=!1,e.setMutationObserver()):(e.tables.find(".tf-numbering").remove(),e.tables.find("colgroup col.tfn").remove()))},f.prototype.updateSorter=function(e,t){var a=this;if(e.hasClass("appfire-table-plus-parms")){if(t&&!a.appFireUpdated&&org_swift_TableSorter&&getTableParms){a.appFireUpdated=!0;var l=new org_swift_TableSorter,i=getTableParms(e);l.customizeMacroTable(e,i.tableParms,i.columnAttributes)}}else if(e.trigger("update",!1),!a.resorting){var r=$.tablesorter||$.tablesorterEditor,s=r.restoreHeaders;r.restoreHeaders=function(){},e.trigger("updateAll",!1),e.one("updateComplete",(function(){r.restoreHeaders=s})),setTimeout((function(){r.restoreHeaders=s}),2e3)}},f.prototype.createSelects=function(e){var t=this;e.find("select").change((function(e,a){var l=$(this);a.selected?l.find("option").filter((function(){return this.textContent===a.selected})).prop("selected",!0):a.deselected&&l.find("option").filter((function(){return this.textContent===a.deselected})).prop("selected",!1),t.comboBoxDiv.find(".search-choice").filter((function(){return o.a.clearString(this.textContent)==="-Empty-"})).addClass("tf-empty-option"),t.enableSaveBtn(),t.filterTable(l)})).each((function(){var e=$(this);e.chosenTF({no_results_text:"No matches found. Press \u0027Enter\u0027 to add",placeholder_text_multiple:e.is(".icon-select")?"Select items...":"Click and start typing...",display_selected_options:!1,width:e.data("width"),addUserOption:!0,isHtml:e.data("html")})}))},f.prototype.createDatePickers=function(e){var t=this;AJS.DatePicker.prototype.localisations||(AJS.DatePicker.prototype.localisations=[]),o.a.initDatePickerLocalisations(t.locale),t.datePickerOptions={overrideBrowserDefault:!0,languageCode:t.locale},e.find("input.date").each((function(){var e=$(this),a=t.getDateFormat(e);t.initDatePicker(e,a);var l=e.val();e.val(o.a.convertToDate(l,a,t.locale))}))},f.prototype.bindInputs=function(){var e=this,t=[];e.comboBoxDiv.delegate("input.user-filter, input.global-filter, input.date, input.number","input keyup",(function(){var a=$(this);clearTimeout(t[a]),t[a]=setTimeout((function(){e.enableSaveBtn(),e.filterTable(a)}),330)})),e.comboBoxDiv.delegate("input.date","change",(function(){e.enableSaveBtn(),e.filterTable($(this))}))},f.prototype.bindReset=function(){var e=this;e.comboBoxDiv.find(".filter-reset").click((function(){return $("body").trigger("filter-options-disable-and-reset",{type:"Reset Filters",pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View"}),e.clearFilters(),e.filterTable(),!1}))},f.prototype.clearFilters=function(){var e=this;e.comboBoxDiv.find("input.user-filter, input.global-filter, input.date, input.number").val("");var t=e.comboBoxDiv.find("select");t.find("option:selected").removeAttr("selected"),t.trigger("chosen:updated"),e.enableSaveBtn()},f.prototype.bindDisable=function(){var e=this,t=e.lockEnabled.show().width()+2;e.lockEnabled.hide(),e.comboBoxDiv.find("div.lockDisabled.not-empty").css("min-width",t>270?t:"270px"),e.lockDisabled.find(".disableLock").click((function(){return $("body").trigger("filter-options-disable-and-reset",{type:"Disable All Filters",pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View"}),e.editorMacro||e.lockEnabled.width(e.lockDisabled.width()),e.lockEnabled.height(e.lockDisabled.height()),e.lockDisabled.hide(),e.lockEnabled.show(),e.isLockEnabled=!0,e.showTableWithoutFilters(),!1})),e.lockEnabled.find(".enableLock").click((function(){return e.editorMacro||e.lockEnabled.width(""),e.lockDisabled.show(),e.lockEnabled.hide(),e.isLockEnabled=!1,e.filterTable(),!1}))},f.prototype.bindDOMChange=function(){var e=this,t=null,a=null;if(e.editorMacro){var l,i=!1,r=e.tableWrapper.html(),s=!1,n=function(t,l){if(t.is("td")||t.is("th")||(t=t.parents("td, th").eq(0)),(parseInt(t.attr("rowspan"))>1||parseInt(t.attr("colspan"))>1)&&(e.normalizeTable(),e.showOrHideTables()),t.hasClass("tablesorter-header"))e.comboBoxDiv.find("[name]").filterByAttr("name",a).attr("name",l).each((function(){var e=$(this).parents(".filter-container:eq(0)").find("label .tf-label-name");e.text(e.text().replace(a,l))})),e.updateRawTables(!0);else{if(t.length){var i=t[0].parentNode,r=e.tables.index($(i).parents("table").eq(0));if(r>=0){var s=e.rawTables[r][i.rowIndex];s&&(s[t[0].cellIndex]=t.text())}}else e.updateRawTables();e.appendTotalRow(),e.appendTotalCol()||(e.tables.trigger("update",!1),e.updateRawTables()),e.appendSparklines(),e.sparkline&&e.fixedRows>0&&e.updateFixedCells()}a=null,e.setFiltrationPanel()},c=function(a,o){if(!(i||e.pauseUpdate||e.sorting||e.resorting||e.editorSave||a.hasClass("fake")||a.is("br")||a.hasClass("tablesorter-savemyplace")))if(a.is(".tf-numbering")){var c=Confluence.MacroParameterSerializer.deserialize(e.editorMacro.attr("data-macro-parameters"));e.numbering=c.numbering?c.numbering:""}else{clearTimeout(t);var d=l&&!l.is("td"),p=function(){if(l=null,"DOMNodeInserted"!==o||a.is("table")||0!==a.parents(".confluenceTable").length){var t=e.tableWrapper.html();if(t!=r)if(r=t,a.is("tr")||a.is("td")||a.is("th")||a.is("table")||s)s=!1,i=!0,e.getTable(),e.addNumbering(),e.setFiltrationPanel(),e.filterTable(),a.is("tr")&&a.show(),a.find("tr").show(),!d&&a.is("td")||a.parents("tr").show(),e.tables.not(".tablesorter").tablesorterEditor({cancelSelection:!1,dateFormat:e.dateFormat,locale:e.localeDateFormat}),a.is(".tablesorter-header")&&a.parents("table").eq(0).tablesorterEditor({cancelSelection:!1,dateFormat:e.dateFormat,locale:e.localeDateFormat}),e.appendTotalRow(),e.appendTotalCol()||e.tables.trigger("update",!1),e.appendSparklines(),a.is("table")?e.makeTablesScrollable():(e.sparkline&&e.fixedRows>0||a.is("th")||a.is("td")||a.is("tr"))&&e.updateFixedCells(),i=!1;else n(a,a.text())}};a.is("table")?p():((a.is("tr")||a.hasClass("numberingColumn"))&&(s=!0),t=setTimeout(p,500)),l=a}},d=function(l,i,s){e.editorSave||e.sorting||e.resorting||(clearTimeout(t),null==a&&(a=i),t=setTimeout((function(){r=e.tableWrapper.html(),n(l,s)}),500))};window.MutationObserver?(e.observerCallback=function(e){e.forEach((function(e){if(e.addedNodes.length)c($(e.addedNodes),"DOMNodeInserted");else if(e.removedNodes.length)c($(e.removedNodes),"DOMNodeRemoved");else if("characterData"==e.type){var t=$(e.target);d(t,e.oldValue,t.text())}}))},e.observer=new MutationObserver(e.observerCallback),e.observerParams={childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0},e.observer.observe(e.tableWrapper[0],e.observerParams),e.tableWrapper.find("td").each((function(){var e=new MutationObserver((function(t){t.forEach((function(t){var a=$(t.target),l=a.hasClass("tf-hidden-column");!l&&o.a.isRowVisible(a.parent()[0])||(e.disconnect(),a.attr(t.attributeName,t.oldValue),l?a.addClass("tf-hidden-column"):a.removeClass("tf-hidden-column"),e.observe(a[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["class","data-highlight-colour"]}))}))}));e.observe(this,{attributes:!0,attributeOldValue:!0,attributeFilter:["class","data-highlight-colour"]})}))):e.tableWrapper.unbind("DOMNodeInserted.tf DOMNodeRemoved.tf").bind("DOMNodeInserted.tf DOMNodeRemoved.tf",(function(e){c($(e.target),e.type)})).unbind("DOMCharacterDataModified.tf").bind("DOMCharacterDataModified.tf",(function(e){d($(e.target),e.originalEvent.prevValue,e.originalEvent.newValue)}))}else{c=function(a,l){return!!(e.sorting||e.resorting||e.pauseUpdate)||(!!o.a.isIgnoreUpdateNode(a)||(l&&l.id=="tf-table-"+e.macroId||o.a.hasTableForUpdate(a)?(clearTimeout(t),t=setTimeout((function(){e.getTable(),e.addNumbering(),setTimeout((function(){e.sortTables(),e.setFiltrationPanel(),e.tableUpdated=!0,e.filterTable(),(e.fixedRows||e.fixedCols)&&e.makeTablesScrollable()}),1e3)}),50),!0):o.a.hasRowForUpdate(a)?(clearTimeout(t),t=setTimeout((function(){e.getTable(),e.addNumbering(),e.setFiltrationPanel(),e.sortTables(),e.tableUpdated=!0,e.filterTable(),(e.fixedRows||e.fixedCols)&&e.updateFixedCells()}),10),!0):o.a.hasCharsForUpdate(a,l)?(clearTimeout(t),t=setTimeout((function(){e.updateRawTables(),e.setFiltrationPanel(),e.filterTable()}),10),!0):void 0))};window.MutationObserver?(e.observerCallback=function(e){e.some((function(e){if(e.addedNodes.length)return c($(e.addedNodes),e.target)}))},e.observer=new MutationObserver(e.observerCallback),e.observerParams={childList:!0,subtree:!0},e.tableWrapper.each((function(){e.observer.observe(this,e.observerParams)}))):e.tableWrapper.bind("DOMNodeInserted",(function(e){c($(e.target),e.originalEvent.relatedNode)})),e.tableWrapper.bind("DOMCharacterDataModified changed.chk",(function(){clearTimeout(t),t=setTimeout((function(){e.updateRawTables(!0),e.setFiltrationPanel()}),50)})),e.tabs&&o.a.onTabChange(e.tableWrapper,(function(){e.getTable(),e.addNumbering(),e.setFiltrationPanel(),e.sortTables(),e.tableUpdated=!0,e.filterTable(),(e.fixedRows||e.fixedCols)&&e.updateFixedCells()})),e.tableWrapper.bind("tf-save",(function(){return e.outerWrapper.trigger("tf-save"),!1}))}},f.prototype.setMutationObserver=function(e){var t=this;if(t.observer)if(t.sorting||t.resorting||t.pauseUpdate)e||(t.prevRowsLength=0,t.rows.forEach((function(e){t.prevRowsLength+=e.length}))),t.observerCallback(t.observer.takeRecords()),t.observer.disconnect();else{if(!e){if(t.observerRestoring)return;t.observerRestoring=!0,t.getTable(!0);var a=0;t.rows.forEach((function(e){a+=e.length})),null!=t.prevRowsLength&&a!=t.prevRowsLength&&(t.prevRowsLength=a,t.tableUpdated=!0,t.setFiltrationPanel(),t.filterTable()),t.observerRestoring=!1}t.tableWrapper.each((function(){t.observer.observe(this,t.observerParams)}))}},f.prototype.processInnerFiltration=function(e,t){var a=!1;return e&&e.tf&&(e.tf.blockEvent=!0,e.tf.filterTable(),e.tf.pauseUpdate=!0,e.tf.setMutationObserver(!0),e.tf.tables.each((function(t){var l=e.tf.tables.eq(t);if(e.tf.rows[t].each((function(l){var i=$(this);if(l>e.tf.headerSize[t]&&(e.tf.cbState[t][l-1]||(i.remove(),a=!0)),e.tf.tdNumbers[t].length){var r=i.children("td,th");$.each(e.tf.tdNumbers[t],(function(e,t){r.eq(t).remove(),a=!0}))}})),e.tf.tdNumbers[t].length){var i=l.hasClass("relative-table"),r=0,s=$(this).children("colgroup").find("col");$.each(e.tf.tdNumbers[t],(function(e,t){s.eq(t).remove(),i&&"none"!==s[t].style.display&&(r+=parseFloat(s[t].style.width))})),r>0&&(l.css("width",parseFloat(l[0].style.width)*(1-r/100)+"%"),s.each((function(a){-1===e.tf.tdNumbers[t].indexOf(a)&&(this.style.width=parseFloat(this.style.width)/(1-r/100)+"%")})))}}))),a&&(e.tf.tables.find(".fake").each((function(){var e=$(this);"none"!==e.css("display")&&e.removeClass("fake")})),o.a.processMergedCells(e.tf.tables,!0)),t&&e&&e.tf&&this.filterTable(),e&&e.tf&&(e.tf.pauseUpdate=!1,e.tf.setMutationObserver(!0),e.tf.blockEvent=!1),a},f.prototype.bindInnerFiltration=function(){var e=this,t=[];e.tableWrapper.find(".pivot-content, .tablefilter-table-wrapper").each((function(){var a=$(this);a.parents("table, .tablefilter-table-wrapper, .pivot-content, .table-joiner").eq(0).is(e.tableWrapper)&&t.push(a.attr("id"))})),t.length&&(e.tableWrapper.bind("tf-filtered pt-calculated",(function(a,l){if(-1!==t.indexOf(l.id)){"tf-filtered"!==a.type&&(e.tableUpdated=!0);var i=e.processInnerFiltration(l,!0);return e.getTable(!0),i&&e.setFiltrationPanel(),l.tf||(e.addNumbering(),(e.fixedRows||e.fixedCols)&&e.makeTablesScrollable(),e.setFiltrationPanel()),e.filterTable(),!1}})),e.tableWrapper.bind("pivot-collapse-change",(function(a,l){if(-1!==t.indexOf(l.id))return e.showOrHideTables(),!1}))),e.tableWrapper.bind("tf-export-ready",(function(t,a){return e.macroId===a.macroId})),e.processInnerFiltration(e.tableWrapper.data("inner-filter"),!1)&&e.getTable(!0)},f.prototype.bindHideBtn=function(){var e=this,t=parseInt(e.outerWrapper.css("margin-top"));e.comboBoxDiv.find(".tf-hider").click((function(){var a=e.tables.eq(0),l=e.comboBoxDiv.outerHeight(!0);e.comboBoxDiv.width();e.comboBoxDiv.css({position:"absolute",top:e.comboBoxDiv.position().top-l});var i=a.outerWidth()-2,r={"margin-top":2*t+l+"px"};e.outerWrapper.css(r),e.comboBoxDiv.animate({top:a.position().top,opacity:0,width:i,height:14},{complete:function(){e.comboBoxDiv.hide().css({width:"",height:"",position:""}),r={"margin-top":t+"px"},e.outerWrapper.animate(r,{complete:function(){e.outerWrapper.css("width","")}}),e.showBtn.show().width(i)},duration:300}),n.a.setCookie(e.hideParamName,!0)})),e.showBtn.click((function(){var a=e.tables.eq(0);e.showBtn.hide(),e.comboBoxDiv.show();var l=e.comboBoxDiv.width(),i=e.comboBoxDiv.height(),r=e.comboBoxDiv.outerHeight(!0);e.comboBoxDiv.css({position:"absolute",opacity:0}),e.comboBoxDiv.css({width:a.width()-2,height:14});var s={"margin-top":2*t+r+"px"};e.outerWrapper.animate(s,{complete:function(){e.comboBoxDiv.css({top:0}).animate({top:-r,opacity:1,width:l,height:i},{complete:function(){e.comboBoxDiv.css({position:"",width:"",height:""}),e.outerWrapper.css({"margin-top":t+"px",width:""})},duration:300})}}),n.a.setCookie(e.hideParamName,!1)}))},f.prototype.bindTableEvents=function(){var e=this;if(!e.editorMacro){var t=e.fixedRows>0?e.tables.eq(0).parent():e.tables.eq(0);t.unbind("mouseover.tf"+e.macroId).bind("mouseover.tf"+e.macroId,(function(){var a=t.offset();e.showBtn.parent().offset({top:a.top-14,left:a.left+t.parent().scrollLeft()}),e.showBtn.css("visibility","visible"),e.showBtn.width(t.outerWidth()-2)})).unbind("mouseout.tf"+e.macroId).bind("mouseout.tf"+e.macroId,(function(){e.showBtn.css("visibility","")})),e.showBtnResizeSensor&&e.showBtnResizeSensor.detach&&e.showBtnResizeSensor.detach(),t.length&&(e.showBtnResizeSensor=new i.ResizeSensor(t,(function(){e.showBtn.width(t.outerWidth()-2)}))),e.outerWrapperResizeSensor&&e.outerWrapperResizeSensor.detach&&e.outerWrapperResizeSensor.detach(),e.outerWrapperResizeSensor=new i.ResizeSensor(e.outerWrapper,(function(){e.showBtn.css("max-width",e.outerWrapper.width()-2+"px")}))}e.tables.unbind("sortStart.tfs"+e.macroId).bind("sortStart.tfs"+e.macroId,(function(){e.sorting=!0,e.setMutationObserver()})).unbind("sortEnd.tfs"+e.macroId).bind("sortEnd.tfs"+e.macroId,(function(){if(e.sorting=!1,e.getTable(!0),e.resetSortBtn.removeClass("tf-disabled-link"),e.restoreNumbering&&(e.restoreNumbering=!1,e.addNumbering(),e.filterTable()),e.totalRows){var t=e.totalRows[e.tables.index(this)];t&&$(this).append(t)}e.fixedRows>1&&e.updateFixedCells(),e.setMutationObserver()}))},f.prototype.bindAddFilter=function(){var e=this,t=function(){"undefined"!=typeof AP&&AP.resize()},a=AJS.InlineDialog(e.comboBoxDiv.find(".lockDisabled .filter-settings"),"tf-add-filter-"+e.macroId,(function(t,a,l){t.css({"min-height":"166px"});var i=[],r=e.getFilters(),s=[{type:"selectfilter",name:"Dropdown Filter",desc:"Select from the list of column unique values",columns:[],existing:r.selectfilters},{type:"userfilter",name:"Free Text Filter",desc:"Enter custom text query or regular expression to filter data in the selected column",columns:[],existing:r.userfilters},{type:"numberfilter",name:"Number Filter",desc:"Specify the number range to filter data in the selected column",columns:[],existing:r.numberfilters},{type:"datefilter",name:"Date Filter",desc:"Select the time period to filter dates in the selected column",columns:[],existing:r.datefilters},{type:"iconfilter",name:"Visual Filter",desc:"Select icons, emoticons, images or state of checkboxes from the list of unique column values",columns:[],existing:r.iconfilters}];$.each(s,(function(t,a){$.each(e.columns,(function(e,t){-1==$.inArray(t.replace(/\,/g,"‚"),a.existing)&&a.columns.push(t)})),a.columns.length&&i.push(a)})),t.html(d.a.addFilterDialog({filters:i,globalfilter:!r.globalfilter,columnhider:!r.columnhider,dateFormat:e.dateFormat})),l()}),{offsetX:-20,width:270,noBind:!0,gravity:"n",initCallback:function(){var a=this,l=a.popup.find(".filter-type"),i=a.popup.find(".date-format-param"),r=i.find(".date-format-input");l.change((function(){var e=l.val(),t=a.popup.find(".tf-add-filter-column:visible select").val();a.popup.find("div.tf-add-filter-column").hide(),a.popup.find("div."+e).show().find("option").filter((function(){return this.textContent==t})).attr("selected","selected"),"datefilter"===e?i.fadeIn():i.fadeOut(),l.attr("title",l.find("option:selected").attr("title"))})),l.trigger("change"),a.popup.find("#cancel").click((function(){return a.hide(),t(),!1})),a.popup.find("#save").click((function(){$(this).prop("disabled",!0);var i=l.val();return"datefilter"===i&&e.changeSettings(r.val().trim()),e.addFilter(i,a.popup.find("select."+i).val()),a.hide(),$("body").trigger("filter-added-deleted",{action:"Filter Added",type:i,pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View"}),t(),!1})),o.a.dateFormatAutocomplete(r,a.popup),e.editorMacro&&a.popup.click((function(){return!1}))},hideCallback:function(){t()}});e.menu.find(".filter-add").bind("click",(function(t){return"undefined"!=typeof AP&&t.clientY+190>$("body").height()-10&&t.clientY-240<0&&AP.resize("100%",t.clientY+190),a.show(),"false"==e.menu.attr("aria-hidden")&&e.comboBoxDiv.find("#filter-settings-"+e.macroId).trigger("aui-button-invoke"),!1})),e.comboBoxDiv.find(".tf-add-start").click((function(t){return e.isCloud?(e.comboBoxDiv.find("#filter-settings-"+e.macroId).trigger("mousedown",[t]),setTimeout((function(){e.comboBoxDiv.find("#filter-settings-"+e.macroId).trigger("aui-button-invoke")}),100)):e.comboBoxDiv.find("#filter-settings-"+e.macroId).trigger("aui-button-invoke"),e.menu.find(".filter-add").addClass("active").removeClass("active",400).addClass("active",500),!1}))},f.prototype.addFilter=function(e,t){var a=this,l=$(d.a.filter({type:e,column:t}));return a.comboBoxDiv.find(".sortable-container").append(l),"selectfilter"==e||"columnhider"==e||"iconfilter"==e?("iconfilter"!==e||a.rawIconTables||a.updateRawIconTables(),a.createSelects(l)):"datefilter"==e&&a.createDatePickers(l),a.setFiltrationPanel(),a.makeResizable(l),a.enableSaveBtn(),l},f.prototype.bindChangeSettings=function(){var e=this,t=function(){"undefined"!=typeof AP&&AP.resize()},a=AJS.InlineDialog(e.comboBoxDiv.find(".lockDisabled .filter-settings"),"tf-change-settings-"+e.macroId,(function(t,a,l){t.css({"min-height":"120px"}),t.html(d.a.changeSettingsDialog({datepattern:e.dateFormat})),l()}),{offsetX:-20,width:270,noBind:!0,gravity:"n",initCallback:function(){var a=this,l=a.popup.find("#tf-cs-dialog-datepattern");o.a.dateFormatAutocomplete(l,a.popup),a.popup.find("#tf-cs-cancel").click((function(){return a.hide(),t(),!1})),a.popup.find("#tf-cs-save").click((function(){return e.changeSettings(l.val()),a.hide(),t(),!1})),e.editorMacro&&a.popup.click((function(){return!1}))},hideCallback:function(){t()}});e.menu.find(".tf-change-settings").bind("click",(function(t){return a.show(),"false"==e.menu.attr("aria-hidden")&&e.comboBoxDiv.find("#filter-settings-"+e.macroId).trigger("aui-button-invoke"),!1}))},f.prototype.changeSettings=function(e){var t=this;t.dateFormat!=e&&(t.enableSaveBtn(),t.dateFormat=e,t.updateDateFilters(),t.filterTable())},f.prototype.updateDateFilters=function(){var e=this;e.comboBoxDiv.find("input.date").each((function(){var t=$(this),a=e.getDateFormat(t),l=t.attr("dateformat");if(a!=l){var i=t.val(),r=null;try{r=o.a.parseDate(i,l,e.locale)}catch(e){}var s=$(t[0].outerHTML);t.replaceWith(s),s.attr("value",null!=r?o.a.formatDate(r,a,e.locale):i),$(".aui-datepicker-dialog").remove(),e.initDatePicker(s,a)}}))},f.prototype.initDatePicker=function(e,t){if(e.attr("dateformat",t),e.attr("placeholder",t),!t.match(/[iw]/)){this.datePickerOptions.dateFormat=o.a.getDateFormatWithoutTime(t);var a=e.datePicker(this.datePickerOptions)}t.indexOf("hh:mm")>=0?(e.width(120),e.bind("focus click keyup input paste",(function(){setTimeout((function(){a.setDate(o.a.getDateTimeObject(e.val(),t).dateString)}),1)}))):e.width(93)},f.prototype.getDateFormat=function(e){var t=this,a=e.attr("name"),l=t.dateFormat;return t.tables.not("#issuetable, .spreadsheets-sheet table").each((function(e){var i=t.rows[e],r=o.a.getColumnPosition(i,a);null!=r&&i.find("td:eq("+r+") time").not('[data-macro-name="page-info"]').length&&(l=t.localeDateFormat)})),l},f.prototype.bindSave=function(){var e=this;e.saveBtn.click((function(t){var a=e.saveBtn;if(!a.hasClass("tf-disabled-link")){$("body").trigger("filter-options-save");var l=e.getFilters(),i={pageId:e.pageId,id:e.macroId,defaults:l.defaults.join(","),width:l.width.join(","),inverse:l.inverse.join(","),order:l.order.join(","),labels:e.getFilterLabels(),datepattern:e.dateFormat},r=function(e){for(var t=[],a=0;a<e.length;a++)""==e[a]?t.push("‌"):t.push(e[a]);return t.join(",")};l.selectfilters.length&&(i.column=r(l.selectfilters)),l.userfilters.length&&(i.userfilter=r(l.userfilters)),l.numberfilters.length&&(i.numberfilter=r(l.numberfilters)),l.datefilters.length&&(i.datefilter=r(l.datefilters)),l.iconfilters.length&&(i.iconfilter=r(l.iconfilters)),l.globalfilter&&(i.globalfilter="true"),l.columnhider&&(i.columnhider="true");var s=function(){a.addClass("tf-disabled-link"),e.comboBoxDiv.add(a).find(".tfac-unsaved").hide()};e.editorMacro?(i.column?e.macroParams.column=i.column:delete e.macroParams.column,i.userfilter?e.macroParams.userfilter=i.userfilter:delete e.macroParams.userfilter,i.numberfilter?e.macroParams.numberfilter=i.numberfilter:delete e.macroParams.numberfilter,i.datefilter?e.macroParams.datefilter=i.datefilter:delete e.macroParams.datefilter,i.globalfilter?e.macroParams.globalFilter=i.globalfilter:delete e.macroParams.globalFilter,i.columnhider?e.macroParams.hideColumns=i.columnhider:delete e.macroParams.hideColumns,i.iconfilter?e.macroParams.iconfilter=i.iconfilter:delete e.macroParams.iconfilter,i.width?e.macroParams["cell-width"]=i.width:delete e.macroParams["cell-width"],i.defaults?e.macroParams.default=i.defaults:delete e.macroParams.default,i.inverse?e.macroParams.inverse=i.inverse:delete e.macroParams.inverse,i.datepattern?e.macroParams.datepattern=i.datepattern:delete e.macroParams.datepattern,i.labels?e.macroParams.labels=i.labels:delete e.macroParams.labels,e.editorMacro.attr("data-macro-parameters",Confluence.MacroParameterSerializer.serialize(e.macroParams)),s()):(n.a.saveMacroParams(i,e.outerWrapper),s(),e.tableWrapper.trigger("tf-save")),t.preventDefault()}}))},f.prototype.bindExport=function(){var e=this;void 0===l.saveAs?(e.menu.find(".export-file-pdf").hide(),e.menu.find(".export-file-doc").hide(),e.menu.find(".export-file-csv").hide()):(e.menu.find(".export-file-pdf").bind("click",(function(t){n.a.loadScriptsBeforeExport((function(){o.a.exportToPdf(e.tableWrapper)})),t.preventDefault()})),e.menu.find(".export-file-doc").bind("click",(function(t){o.a.exportToDoc(e.tableWrapper),t.preventDefault()})),e.menu.find(".export-file-csv").click((function(t){o.a.createDialog(e.tables,e.rows[0],e.macroId).show(),"undefined"!=typeof AP&&$("#export-csv-dialog-"+e.macroId).css("margin-top",0),t.preventDefault()})))},f.prototype.bindSortReset=function(){var e=this;e.resetSortBtn.bind("click",(function(t){t.preventDefault(),e.resetSortBtn.hasClass("tf-disabled-link")||(e.sorts.length?e.sortTables():e.tables.trigger("sorton",[[]]),e.resetSortBtn.addClass("tf-disabled-link"))}))},f.prototype.bindCopyUrl=function(){var e=this;e.menu.find(".get-tf-url").bind("click",(function(t){var a=e.getFilters();a.sorts=[],e.tables.each((function(t){this.config&&this.config.sortList&&this.config.sortList.forEach((function(l){var i=0===l[1]?"⇧":"⇩";a.sorts.push(e.rawTables[t][0][l[0]]+" "+i)}))}));var l=window.location.hash,i=window.location.href.replace(l,""),r=$.getUrlHashVar("tf-filters");if(r){var s="tf-filters="+encodeURIComponent(r);l=(l=l.replace("&"+s,"")).replace("#"+s,"")}i=i+l+(l?"&":"#");var o=$("<span></span>");$("body").append(o),o.text(i+"tf-filters="+encodeURIComponent(JSON.stringify(a)));var n=document.createRange();n.selectNode(o[0]);var c=window.getSelection();c.removeAllRanges(),c.addRange(n),document.execCommand("copy"),o.remove(),t.preventDefault()}))},f.prototype.bindGetUrlValues=function(){var e=this,t=function(){var t=$.getUrlHashVar("tf-filters");if(t){var a=JSON.parse(t);e.setFilters(a)}};$(window).bind("hashchange",t),$(".tablefilter-table-wrapper").one("tf-filtered",t)},f.prototype.setFilters=function(e){var t=this,a=function(e,t){e?(t.addClass("inverse"),t.parents(".filter-container:eq(0)").addClass("inverse")):(t.removeClass("inverse"),t.parents(".filter-container:eq(0)").removeClass("inverse"))},l=function(e,t){return e.filterByAttr("name",t)};o.a.i18nFilterValues(e.defaults);var i=0;(t.clearFilters(),e.selectfilters.forEach((function(r){r=r.replace(/\‚/g,",");var s=l(t.comboBoxDiv.find("select.select"),r);0==s.length&&(s=t.addFilter("selectfilter",r).find("select")),a(e.inverse[i],s);var n=e.defaults[i++].replace(/\‚/g,","),c=o.a.clearStringLowerCase(n).split("&&");n=n.split("&&");var d=[];s.find("option:selected").prop("selected",!1),s.find("option").each((function(){var e=$(this),t=$.inArray(o.a.clearStringLowerCase(e[0].textContent),c);-1!=t&&(e.prop("selected",!0),d.push(t))})),n.forEach((function(e,t){e&&-1==$.inArray(t,d)&&s.append($('<option selected="selected"></option>').text(e))})),s.trigger("chosen:updated")})),e.userfilters.forEach((function(r){r=r.replace(/\‚/g,",");var s=l(t.comboBoxDiv.find("input.user-filter"),r);0==s.length&&(s=t.addFilter("userfilter",r).find("input")),a(e.inverse[i],s),s.val(e.defaults[i++].replace(/\‚/g,","))})),e.numberfilters.forEach((function(r){r=r.replace(/\‚/g,",");var s=l(t.comboBoxDiv.find("input.number.from"),r);0==s.length&&(s=t.addFilter("numberfilter",r).find("input.from"));var o=l(t.comboBoxDiv.find("input.number.to"),r);a(e.inverse[i],s),a(e.inverse[i],o);var n=e.defaults[i++].replace(/\‚/g,",").split("->");s.val(n[0]),o.val(n[1])})),e.datefilters.forEach((function(r){r=r.replace(/\‚/g,",");var s=l(t.comboBoxDiv.find("input.date.from"),r);0==s.length&&(s=t.addFilter("datefilter",r).find("input.from"));var n=l(t.comboBoxDiv.find("input.date.to"),r);a(e.inverse[i],s),a(e.inverse[i],n);var c=e.defaults[i++].replace(/\‚/g,",").split("->");s.val(o.a.convertToDate(c[0],s.attr("dateformat"),t.locale)),n.val(o.a.convertToDate(c[1],n.attr("dateformat"),t.locale))})),e.globalfilter)&&(0==(r=t.comboBoxDiv.find("input.global-filter")).length&&(r=t.addFilter("globalfilter","").find("input")),a(e.inverse[i],r),r.val(e.defaults[i++].replace(/\‚/g,",")));if(e.columnhider){var r;0==(r=t.comboBoxDiv.find("select.column-select")).length&&(r=t.addFilter("columnhider","").find("select")),a(e.inverse[i],r);var s=e.defaults[i++].replace(/\‚/g,","),n=o.a.clearStringLowerCase(s).split("&&");s=s.split("&&");var c=[];r.find("option:selected").prop("selected",!1),r.find("option").each((function(){var e=$(this),t=$.inArray(o.a.clearStringLowerCase(e.text()),n);-1!=t&&(e.prop("selected",!0),c.push(t))})),s.forEach((function(e,t){e&&-1==$.inArray(t,c)&&r.append($('<option selected="selected"></option>').text(e))})),r.trigger("chosen:updated")}e.iconfilters.forEach((function(r){r=r.replace(/\‚/g,",");var s=l(t.comboBoxDiv.find("select.icon-select"),r);0==s.length&&(s=t.addFilter("iconfilter",r).find("select")),a(e.inverse[i],s);var n=o.a.clearStringLowerCase(e.defaults[i++].replace(/\‚/g,",")).split("&&");s.find("option:selected").prop("selected",!1),s.find("option").each((function(){var e=$(this);-1!=$.inArray(o.a.clearStringLowerCase(e[0].textContent),n)&&e.prop("selected",!0)})),s.trigger("chosen:updated")})),e.sorts&&(t.sorts=e.sorts,t.sortTables()),t.filterTable()},f.prototype.fixURIHash=function(){var e=$.getUrlHashVar("tf-filters");if(e){var t=location.hash,a=location.hash.replace("&tf-filters="+encodeURIComponent(e),"");t!=a&&(location.hash=a,location.hash=t)}},f.prototype.bindMakeInverse=function(){var e=this;e.comboBoxDiv.delegate(".eq","click",(function(){var t=$(this).parents(".filter-container:eq(0)");t.addClass("inverse");var a=t.find("input, select").addClass("inverse");$("body").trigger("filter-inverse-direct",{type:y(t),pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View",filterMode:"Inverse"}),e.enableSaveBtn(),e.filterTable(a)})),e.comboBoxDiv.delegate(".not-eq","click",(function(){var t=$(this).parents(".filter-container:eq(0)");t.removeClass("inverse");var a=t.find("input, select").removeClass("inverse");$("body").trigger("filter-inverse-direct",{type:y(t),pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View",filterMode:"Normal"}),e.enableSaveBtn(),e.filterTable(a)}))},f.prototype.setFiltrationPanel=function(){var e=this,t=e.columns.map((function(e){return e.toLocaleLowerCase()})),a=e.comboBoxDiv.find("select.select, input.user-filter, div.range, select.icon-select");a.each((function(){var e=$(this);-1==$.inArray(o.a.clearStringLowerCase(e.attr("name")),t)?e.parents(".filter-container").eq(0).hide():e.parents(".filter-container").eq(0).show()})),e.setSelectOptions();var l=e.comboBoxDiv.find("select.column-select");l.find("option:not(:selected)").remove();var i=[];l.find("option").each((function(){i.push($(this).hasClass("tf-empty-option")?"":o.a.clearString(this.textContent))})),$.each(e.columns,(function(e,t){if(-1==$.inArray(t,i)){var a="",r=t;""==t&&(a=' class="tf-empty-option"',r="-Empty-"),l.append($("<option"+a+"></option>").text(r))}})),l.trigger("chosen:updated"),e.comboBoxDiv.find(".search-choice").filter((function(){return o.a.clearString(this.textContent)=="-Empty-"})).addClass("tf-empty-option"),e.updateDateFilters();var r=a.filter((function(){return"none"!=$(this).parent().css("display")})).length>0||l.length>0||e.comboBoxDiv.find(".global-filter").length>0,s="all"!=e.showNRows;if(0==e.rawTables.length)e.comboBoxDiv.show(),e.tableWrapper.data("hasFrame")?(e.comboBoxDiv.find(".waiting-for-table").show(),e.comboBoxDiv.find(".no-table-message").hide()):(e.comboBoxDiv.find(".no-table-message").show(),e.comboBoxDiv.find(".waiting-for-table").hide()),e.comboBoxDiv.find(".empty-message").hide(),e.lockDisabled.hide(),e.lockEnabled.hide(),e.outerWrapper.addClass("no-table"),e.comboBoxDiv.find(".tf-hider-wrapper").hide();else{if(e.comboBoxDiv.find(".tf-hider-wrapper").show(),e.outerWrapper.removeClass("no-table"),e.comboBoxDiv.find(".no-table-message").hide(),e.comboBoxDiv.find(".waiting-for-table").hide(),e.isLockEnabled=e.isLockEnabled&&(r||s),e.isLockEnabled?(e.lockDisabled.hide(),e.lockEnabled.show()):(e.lockDisabled.show(),e.lockEnabled.hide()),r||s||!(e.numbering||e.fixedRows||e.sorts.length||e.sparkline||e.fixedCols||e.totalRow.join("")||e.totalCol)?e.editorMacro||"true"!=n.a.getCookie(e.hideParamName)?(e.comboBoxDiv.show(),e.showBtn.hide()):(e.comboBoxDiv.hide(),e.showBtn.show()):e.editorMacro||(e.comboBoxDiv.hide(),e.showBtn.show()),!r&&s?(e.comboBoxDiv.find(".disableLock").show(),e.comboBoxDiv.find(".show-n-rows-only-message").show()):e.comboBoxDiv.find(".show-n-rows-only-message").hide(),r||s){e.comboBoxDiv.find(".filter-buttons-container").show(),e.comboBoxDiv.find(".empty-message").hide(),e.lockDisabled.addClass("not-empty").removeClass("empty");var c=e.outerWrapper.css("display");e.outerWrapper.show();var d=e.comboBoxDiv.css("display");if(e.comboBoxDiv.show(),!e.editorMacro){e.lockEnabled.css("width","").css("display","inline-flex");var p=Math.max(302,Math.ceil(e.lockEnabled.show().width())+1);e.lockDisabled.css("min-width",p+"px")}e.lockDisabled.show(),e.editorMacro||e.lockEnabled.width(Math.max(302,Math.ceil(e.lockDisabled.width()))),e.lockEnabled.height(Math.max(40,e.lockDisabled.height())),e.comboBoxDiv.css("display",d),e.outerWrapper.css("display",c),e.lockEnabled.css("display","block"),e.isLockEnabled?e.lockDisabled.hide():e.lockEnabled.hide()}else e.lockDisabled.addClass("empty").removeClass("not-empty").css("min-width",""),e.comboBoxDiv.find(".filter-buttons-container").show(),e.comboBoxDiv.find(".empty-message").show();r?(e.comboBoxDiv.find(".lockDisabled .filter-reset").prop("disabled",!1),e.comboBoxDiv.find(".lockDisabled .disableLock").prop("disabled",!1)):(e.comboBoxDiv.find(".lockDisabled .filter-reset").prop("disabled",!0),s||e.comboBoxDiv.find(".lockDisabled .disableLock").prop("disabled",!0))}e.outerWrapper.css("visibility","visible")},f.prototype.setSelectOptions=function(){var e=this,t=e.comboBoxDiv.find("select.select, select.icon-select").filter((function(){return"none"!=$(this).parent().css("display")}));if(t.find("option:not(:selected)").remove(),e.shouldUpdateSelectOptions)var a=e.getFilterContainers().not(".columnhider-element");t.each((function(){var t=$(this),l=t.attr("name").toLocaleLowerCase(),i=t.data("html"),r=!0,s=[],n=[];t.find("option").each((function(){if(i){var e=this.textContent;if(e!="-Empty-"){var t=$(e);t.is("img")&&(e=t[0].src,e=o.a.clearIconSrc(e))}else n.push("");n.push(e.toLocaleLowerCase())}else n.push($(this).hasClass("tf-empty-option")?"":o.a.clearStringLowerCase(this.textContent))})),$.each(e.rawTables,(function(c,d){var p=o.a.getCellPositions(d,l);if(e.shouldUpdateSelectOptions&&d.length){for(var f=new Array(d.length-1),u=0;u<f.length;u++)f[u]=!0;a.not(t.parent()).each((function(){var t=$(this).data("state");if(t&&t[c])for(var a=0;a<t[c].length;a++)e.isAND?f[a]=f[a]&&t[c][a]:f[a]=f[a]&&!t[c][a]}))}p.forEach((function(t){if($.each(i?e.rawIconTables[c]:d,(function(a,l){if(0!=a&&(!f||f[a-1])){var c=l[t];if(null==c)return;if(i&&c){var d=$(c);d.filter("img").each((function(){c=o.a.clearStringLowerCase(this.src),c=o.a.clearIconSrc(c),-1==$.inArray(c,n)&&(n.push(c),s.push(this.outerHTML))})),d.filter("ul").length&&r&&(r=!1,-1==$.inArray('<ul class="inline-task-list"><li></li></ul>',n)&&(s.push('<ul class="inline-task-list"><li></li></ul>'),n.push('<ul class="inline-task-list"><li></li></ul>')),-1==$.inArray('<ul class="inline-task-list"><li class="checked"></li></ul>',n)&&(s.push('<ul class="inline-task-list"><li class="checked"></li></ul>'),n.push('<ul class="inline-task-list"><li class="checked"></li></ul>')))}else e.ddSeparator&&""!=c?c.split(e.ddSeparator).forEach((function(e){(e=e.trim())&&(c=e.toLocaleLowerCase(),-1==$.inArray(c,n)&&(n.push(c),s.push(e)))})):(c=c.toLocaleLowerCase(),-1==$.inArray(c,n)&&(n.push(c),s.push(l[t])))}})),!i&&-1==$.inArray("@currentuser",n)){var a=e.tables.eq(c),l=!1;if(e.rows[c].length>1&&a.hasClass("tasks-report")&&o.a.getNthTdElem(e.rows[c][1],t).hasClass("tasks-report-assignee"))l=!0;else if(t++,a.find(".confluence-userlink").length){var p=a.find("tr td:nth-child("+t+"), tr th:nth-child("+t+")").find(".confluence-userlink").eq(0);p.length&&p.parents("td").eq(0).text().trim()==p.text().trim()&&(l=!0)}l&&(n.push("@currentuser"),s.push("@currentUser"))}}))})),s.sort();var c="";$.each(s,(function(e,t){var a="",l=t;""==t&&(a=' class="tf-empty-option"',l="-Empty-"),c+=$("<option"+a+"></option>").text(l)[0].outerHTML})),t.append(c),t.trigger("chosen:updated")}))},f.prototype.makeSortable=function(){var e=this;e.comboBoxDiv.find(".sortable-container").sortable({cancel:"input,textarea,button,select,option,.chosen-drop",scroll:!1,items:".sortable",start:function(e,t){t.item.width(Math.ceil(t.item.width())+1)},sort:function(t,a){e.highlightRemoveFilter(a.offset,a.helper)},beforeStop:function(t,a){e.enableSaveBtn(),e.removeFilter(a.offset,a.item)},update:function(e,t){$("body").trigger("filter-reordered",{type:y(t.item),pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View"})}})},f.prototype.makeResizable=function(e){var t=this;0==$("body.content-preview").length&&e.find(".chosen-container, div.tf-resizeable").length>0&&e.find(".chosen-container, div.tf-resizeable").resizable({handles:"e",resize:function(e,a){a.element.hasClass("chosen-container")?a.element.parent().find("select").attr("data-width",a.size.width):a.element.find("input").attr("data-width",a.size.width),t.enableSaveBtn()}})},f.prototype.makeTablesScrollable=function(){var e=this;o.a.hasLoadingContent(e.tableWrapper)||(e.pauseUpdate=!0,e.setMutationObserver(!0),e.tables.find(".tf-fixed-column-border").remove(),e.tables.parents(".table-wrap, .table-wrap-aui").unbind("scroll scroll-tf"),e.tables.find("td.tf-floating,th.tf-floating").removeClass("tf-floating").removeClass("tf-float-head").css({top:"",left:""}),e.tableWrapper.find(e.editorMacro?".table-wrap.tf-fixed-rows":".table-wrap.editor, .table-wrap-aui").each((function(){var e=$(this);e.before(e.children("table, .table-wrap")),e.remove()})),e.tableWrapper.removeClass("fixed"),e.editorMacro&&e.tableWrapper.find(".resize-sensor, .resize-sensor-shrink, .resize-sensor-expand").remove(),e.fixColumns(),e.pauseUpdate=!1,e.setMutationObserver(!0))},f.prototype.fixColumns=function(){var e=this;if(e.fixedCols>0&&!e.editorMacro||e.fixedRows>0){var t=window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)||/Edge/.test(navigator.userAgent);e.tables.each((function(a){var l=$(this);e.editorMacro?l.wrap('<div class="table-wrap editor"></div>'):e.fixedRows>0&&l.hasClass("aui")?l.wrap('<div class="table-wrap-aui"></div>'):0==l.parents(".table-wrap").length&&l.wrap('<div class="table-wrap"></div>');var i=l.parents(".table-wrap, .table-wrap-aui").eq(0);if(i.addClass("tf-fixed"),t&&i.addClass("ie"),l.find(".tableFloatingHeader").remove(),e.fixedRows>0){var r=e.rows[a].length>e.fixedRows?2*(e.rows[a].eq(e.fixedRows).offset().top-l.offset().top):l.height(),s=e.heightValue?e.heightValue:Math.floor(.7*window.innerHeight)||600;i.css("max-height",Math.max(r,s)+"px"),i.addClass("tf-fixed-rows")}l.tableHeadFixer({left:e.editorMacro?0:e.fixedCols,head:e.fixedRows,parent:i})})).bind("tablesorter-initialized updateComplete",(function(){$(this).find("th .tf-fixed-column-border").each((function(){var e=$(this);e.parents("th:eq(0)").append(e)}))})),t&&$(".tf-fixed-column-border.right, .tf-fixed-column-border.left").each((function(){var e=$(this);e.height(e.parents("th, td").eq(0).outerHeight()-1)})),e.tableWrapper.addClass("fixed")}},f.prototype.updateFixedCells=function(){var e=this;(e.fixedCols>0&&!e.editorMacro||e.fixedRows>0)&&(e.pauseUpdate=!0,e.setMutationObserver(!0),e.tables.parents(".table-wrap, .table-wrap-aui").unbind("scroll scroll-tf"),e.tables.find(".tf-fixed-column-border").remove(),e.tables.find("td.tf-floating,th.tf-floating").removeClass("tf-floating").css({top:"",left:""}),e.tables.each((function(){var t=$(this),a=t.parents(".table-wrap, .table-wrap-aui").eq(0);t.tableHeadFixer({left:e.editorMacro?0:e.fixedCols,head:e.fixedRows,parent:a})})),e.pauseUpdate=!1,e.setMutationObserver(!0))},f.prototype.enableSaveBtn=function(){this.saveBtn.removeClass("tf-disabled-link"),this.comboBoxDiv.add(this.saveBtn).find(".tfac-unsaved").show()},f.prototype.shouldRemoveFilter=function(e){var t=this,a=t.comboBoxDiv.offset(),l=a.left+t.comboBoxDiv.width()+10,i=a.left-10,r=a.top+t.comboBoxDiv.height()-10,s=a.top-20;return e.top<s||e.top>r||e.left>l||e.left<i},f.prototype.removeFilter=function(e,t){var a=this;a.outerWrapper.click(),a.shouldRemoveFilter(e)?(t.remove(),$("body").trigger("filter-added-deleted",{action:"Filter Deleted",type:y(t),pageMode:$("body").find("div#macro-browser-preview").length?"Macro Preview":"Page View"}),setTimeout((function(){a.filterTable(),a.setFiltrationPanel()}),500)):t.removeClass("filter-removing")},f.prototype.highlightRemoveFilter=function(e,t){this.shouldRemoveFilter(e)?t.addClass("filter-removing"):t.removeClass("filter-removing")},f.prototype.getFilters=function(){var e=this,t={selectfilters:[],userfilters:[],numberfilters:[],datefilters:[],globalfilter:e.comboBoxDiv.find("input.global-filter"),columnhider:e.comboBoxDiv.find("select.column-select"),iconfilters:[],defaults:[],width:[],inverse:[],order:[]},a=e.comboBoxDiv.find(".sortable-container .filter-container");if(e.comboBoxDiv.find("select.select").each((function(){var e=[],l=$(this);t.selectfilters.push(l.attr("name").replace(/\,/g,"‚")),t.width.push(l.attr("data-width").replace("px","")),l.find("option:selected").each((function(){e.push(this.textContent.replace(/\,/g,"‚"))})),t.defaults.push(e.join("&&")),t.inverse.push(l.hasClass("inverse")),t.order.push(a.index(l.parents(".filter-container")))})),e.comboBoxDiv.find("input.user-filter").each((function(){var e=$(this);t.userfilters.push(e.attr("name").replace(/\,/g,"‚")),t.width.push(e.attr("data-width").replace("px","")),t.defaults.push(e.val().replace(/\,/g,"‚")),t.inverse.push(e.hasClass("inverse")),t.order.push(a.index(e.parents(".filter-container")))})),e.comboBoxDiv.find(".range.numbers").each((function(){var e=[],l=$(this);t.numberfilters.push(l.attr("name").replace(/\,/g,"‚")),l.find("input.number").each((function(){e.push($(this).val().replace(/\,/g,"‚"))})),t.defaults.push(e.join("->")),t.inverse.push(l.parent().hasClass("inverse")),t.order.push(a.index(l.parents(".filter-container")))})),e.comboBoxDiv.find(".range.dates").each((function(){var l=[],i=$(this);t.datefilters.push(i.attr("name").replace(/\,/g,"‚")),i.find("input.date").each((function(){var t=$(this),a=t.val();l.push(o.a.dateToUTCTimestamp(a,t.attr("dateformat"),e.locale))})),t.defaults.push(l.join("->")),t.inverse.push(i.parent().hasClass("inverse")),t.order.push(a.index(i.parents(".filter-container")))})),t.globalfilter.length?(t.defaults.push(t.globalfilter.val().replace(/\,/g,"‚")),t.width.push(t.globalfilter.attr("data-width").replace("px","")),t.inverse.push(t.globalfilter.hasClass("inverse")),t.order.push(a.index(t.globalfilter.parents(".filter-container"))),t.globalfilter=!0):t.globalfilter=!1,t.columnhider.length){var l=[];t.columnhider.find("option:selected").each((function(){l.push(this.textContent.replace(/\,/g,"‚"))})),t.defaults.push(l.join("&&")),t.width.push(t.columnhider.attr("data-width").replace("px","")),t.inverse.push(t.columnhider.hasClass("inverse")),t.order.push(a.index(t.columnhider.parents(".filter-container"))),t.columnhider=!0}else t.columnhider=!1;return e.comboBoxDiv.find("select.icon-select").each((function(){var e=[],l=$(this);t.iconfilters.push(l.attr("name").replace(/\,/g,"‚")),t.width.push(l.attr("data-width").replace("px","")),l.find("option:selected").each((function(){e.push(this.textContent.replace(/\,/g,"‚"))})),t.defaults.push(e.join("&&")),t.inverse.push(l.hasClass("inverse")),t.order.push(a.index(l.parents(".filter-container")))})),o.a.unI18nFilterValues(t.defaults),t},f.prototype.getTable=function(e){var t=this,a=t.tabs&&o.a.hasTabs(t.tableWrapper);t.tables=o.a.getTableNodes(t.tableWrapper,t.editorMacro?"table.confluenceTable":"table").filter((function(){var e=$(this);if(a&&o.a.hasInactiveTab(e))return!1;var l=e.parents("table:not(.wysiwyg-macro), .tablefilter-table-wrapper");return l.eq(0).is(t.tableWrapper)||l.eq(0).is(".tablefilter-table-wrapper")&&l.eq(1).is(t.tableWrapper)})),e||t.normalizeTable(),t.rows=[],t.headerSize=[],t.tables.each((function(){var e=o.a.getRows(this);t.rows.push(e),t.headerSize.push(o.a.getMaxRowspan($(e[0])))})),t.updateRawTables(),o.a.setPaginationMsg(t.tableWrapper),e||t.bindTableEvents()},f.prototype.updateRawTables=function(e){var t=this;t.rawTables=o.a.getTablesRowsValues(t.rows,t.editorMacro?o.a.editorType:o.a.textType),e||(t.rawIconTables=null,(t.comboBoxDiv.find("select.icon-select").length||-1!==t.totalRow.indexOf("Count not empty"))&&t.updateRawIconTables()),t.columns=o.a.getColumns(t.rawTables)},f.prototype.updateRawIconTables=function(){this.rawIconTables=o.a.getTablesRowsValues(this.rows,o.a.visualType)},f.prototype.filterTable=function(e){var t=this;if(!o.a.hasLoadingContent(t.tableWrapper)){if(t.isLockEnabled)return t.appendTotalRow(),t.appendTotalCol(),t.appendSparklines(),t.setTablesReady(),void t.prepareExport();var a=t.getFilterContainers();e?t.filterContainer(e.parents(".filter-container.sortable")):t.filterContainer(a),t.showTable(t.isAND),t.filtered=!1,a.not(".columnhider-element").each((function(){var e=$(this);t.filtered=t.filtered||e.data("filtered");var a=e.data("state");if(a)for(var l=0;l<a.length;l++)for(var i=0;i<a[l].length;i++)t.isAND?t.cbState[l][i]=t.cbState[l][i]&&a[l][i]:t.cbState[l][i]=t.cbState[l][i]||a[l][i]})),t.filtered||t.isAND||t.showTable(!0);var l=a.filter(".columnhider-element").data("state");l&&l.length&&(t.tdNumbers=l),t.setTablesReady(),t.showOrHideTables(),t.appendTotalRow(),(t.updateSparkline||t.tableUpdated)&&(t.rows[0]&&!t.rows[0].eq(0).find(".total-col.tf-hidden-column").length&&t.appendTotalCol(),t.appendSparklines(),t.updateSparkline=!1,t.tableUpdated=!1,t.sparkline&&t.fixedRows>0&&t.updateFixedCells()),t.shouldUpdateSelectOptions&&t.setSelectOptions(),t.prepareExport(),t.editorMacro&&t.editorMacro.data("tf-self",!0).attr("type",JSON.stringify(t.getFilters()))}},f.prototype.prepareExport=function(e){var t=this;t.sortWait=t.sortWait||!t.sorts.length||e,t.blockEvent||o.a.hasLoadingContent(t.tableWrapper)||!t.sortWait||(clearTimeout(t.exportTimer),t.exportTimer=setTimeout((function(){t.tableWrapper.trigger("tf-export-ready",{macroId:t.macroId})}),300))},f.prototype.setTablesReady=function(){this.tables.data("tf-ready",!0)},f.prototype.getFilterContainers=function(){return this.comboBoxDiv.find(".filter-container.sortable").filter((function(){return"none"!=$(this).css("display")}))},f.prototype.filterContainer=function(e){var t=this;e.find("select, input").each((function(){var e=$(this);e.is(".select")?t.treatSelectFilter(e):e.is(".user-filter")?t.treatUserFilter(e):e.is(".number")?t.treatNumberFilter(e):e.is(".date")?t.treatDateFilter(e):e.is(".global-filter")?t.treatGlobalFilter(e):e.is(".column-select")?t.treatColumnFilter(e):e.is(".icon-select")&&t.treatIconFilter(e)}))},f.prototype.showTable=function(e){var t=this,a=t.tables.length;t.cbState=new Array(a),t.tdNumbers=new Array(a);for(var l=0;l<a;l++){t.tdNumbers[l]=[],t.cbState[l]=new Array(t.rows[l].length>0?t.rows[l].length-1:0);for(var i=0;i<t.cbState[l].length;i++)t.cbState[l][i]=e}},f.prototype.treatSelectFilter=function(e){var t=this,a=[];e.find("option:selected").each((function(){var e=$.trim(this.textContent);e==="-Empty-"?e="":"@currentUser"===e&&(e=n.a.getCurrentUserFullName(),a.push(n.a.getCurrentUserName())),a.push(e.toLocaleLowerCase())}));var l=e.parent();if(0===a.length)return l.data("state",[]),void l.data("filtered",!1);var i,r=e.attr("name"),s=e.hasClass("inverse");i=t.ddSeparator?function(e,a){if(""===e)return-1===$.inArray(e,a);var l=!0;return e.split(t.ddSeparator).some((function(e){return(e=e.trim())&&(l=-1===$.inArray(e,a)),!l})),l}:function(e,t){return-1==$.inArray(e,t)};var c=[];t.rawTables.forEach((function(e,l){var n=o.a.getCellPositions(e,r);c[l]=[],n.length&&e.forEach((function(e,r){if(r>0){var d=!0;n.forEach((function(t){var l=o.a.clearStringLowerCase(e[t]);d=d&&i(l,a)})),d=t.isAND?d:!d,c[l][r-1]=s!=d?!t.isAND:t.isAND}}))})),l.data("state",c),l.data("filtered",!0)},f.prototype.treatIconFilter=function(e){var t=this,a=[],l=[],i=!1;e.find("option:selected").each((function(){var e=$.trim(this.textContent);if(e=="-Empty-")i=!0;else{var t=$(e);t.length&&(t.is("ul")?l.push("ul.inline-task-list li"+(t.find("li").hasClass("checked")?".checked":":not(.checked)")):((e=t[0].src)&&(e=o.a.clearStringLowerCase(e),e=o.a.clearIconSrc(e)),a.push(e)))}}));var r=e.parent();if(0==a.length&&0==l.length&&!i)return r.data("state",[]),void r.data("filtered",!1);l=l.join(",");var s=e.attr("name"),n=e.hasClass("inverse"),c=[];t.tables.each((function(e){var r=t.rows[e],d=o.a.getColumnPositions(r,s);c[e]=[],d.length&&r.each((function(r){if(r>0){var s=!0,p=this;d.forEach((function(e){var t,r,n,c=o.a.getNthTdElem(p,e);a.length&&o.a.getTdIconsSrc(c).some((function(e){return e&&(e=o.a.clearStringLowerCase(e),e=o.a.clearIconSrc(e)),!(t=-1==$.inArray(e,a))})),l&&(r=0==c.find(l).length),i&&(n=c.find("ul.inline-task-list li, img[src]").length>0),s=s&&(!1!==t&&!1!==n&&!0===r||!0===t&&!1!==n&&!1!==r||!1!==t&&!0===n&&!1!==r)})),s=t.isAND?s:!s,c[e][r-1]=n!=s?!t.isAND:t.isAND}}))})),r.data("state",c),r.data("filtered",!0)},f.prototype.treatInputFilter=function(e,t){var a,l=this,i=e.val(),r=$.trim(i).toLocaleLowerCase();if("@currentUser"==i&&(i=n.a.getCurrentUserFullName()+"|"+n.a.getCurrentUserName()),r.indexOf("&")>0){var s="";$.each(i.split("&"),(function(e,t){s+="(?=.*"+t.trim()+")"})),i=s}try{var c=new RegExp(i,"i")}catch(e){}t&&(a=e.attr("name"));var d=e.parents(".filter-container.sortable");if(""==r)return d.data("state",[]),void d.data("filtered",!1);var p=e.hasClass("inverse"),f=[];l.rawTables.forEach((function(e,i){var s=o.a.getCellPositions(e,a);f[i]=[],t&&!s.length||e.forEach((function(e,a){if(a>0){var n="";t?(s.forEach((function(t){e[t]&&(n=n+" "+e[t])})),n=n.trim()):n=e.join(" ");var d=-1==o.a.clearStringLowerCase(n).indexOf(r)&&(!c||null==n.match(c));d=l.isAND?d:!d,f[i][a-1]=p!=d?!l.isAND:l.isAND}}))})),d.data("state",f),d.data("filtered",!0)},f.prototype.treatGlobalFilter=function(e){this.treatInputFilter(e,!1)},f.prototype.treatUserFilter=function(e){this.treatInputFilter(e,!0)},f.prototype.treatDateFilter=function(e){var t=this,a=$.trim(e.val()).toLocaleLowerCase(),l=e.attr("name"),i=e.attr("dateformat"),r=e.hasClass("from"),s=e.hasClass("inverse");if(r)t.rangeFilterValues={from:d()};else{var n=e.parent().parent();if(t.rangeFilterValues.to=d(),t.rangeFilterValues.from||t.rangeFilterValues.to){var c=[];t.rawTables.forEach((function(e,a){var r=o.a.getCellPositions(e,l);c[a]=[],r.length&&e.forEach((function(e,l){if(l>0){var n=!0;r.forEach((function(a){var l=e[a]||"";try{var r=o.a.parseDate(l,i,t.locale);r?s?t.rangeFilterValues.from?n=t.rangeFilterValues.to?n&&t.rangeFilterValues.from<=r&&t.rangeFilterValues.to>=r:n&&t.rangeFilterValues.from<=r:t.rangeFilterValues.to&&(n=n&&t.rangeFilterValues.to>=r):t.rangeFilterValues.from?n=t.rangeFilterValues.to?n&&(t.rangeFilterValues.from>r||t.rangeFilterValues.to<r):n&&t.rangeFilterValues.from>r:t.rangeFilterValues.to&&(n=n&&t.rangeFilterValues.to<r):n=n&&!s}catch(e){n=!1,AJS.log("Error while filtering date '"+l+"': "+e)}})),n=t.isAND?n:!n,c[a][l-1]=n?!t.isAND:t.isAND}}))})),n.data("state",c),n.data("filtered",!0)}else n.data("state",[]),n.data("filtered",!1)}function d(){try{var e;if("today"==a||"heute"==a)return(e=new Date).setHours(0,0,0,0);var l=["y","m","w","d"],r=!1;return l.some((function(e){if(new RegExp("^[+-]?\\d+"+e).test(a))return r=!0,!0})),r?((e=new Date).setHours(0,0,0,0),l.forEach((function(t,l){var i=a.split(t);if(2==i.length){var r=parseInt(i[0]);3==l?e.setDate(e.getDate()+r):2==l?e.setDate(e.getDate()+7*r):1==l?e.setMonth(e.getMonth()+r):e.setYear(e.getFullYear()+r),a=i[1]}})),e):e=o.a.parseDate(a,i,t.locale)}catch(e){return AJS.log("Error while filtering by date '"+a+"': "+e),!1}}},f.prototype.treatNumberFilter=function(e){var t=this,a=$.trim(e.val()).toLocaleLowerCase(),l=e.attr("name"),i=e.hasClass("inverse"),r=e.hasClass("from"),s=o.a.getValueType(a,t.separator,t.worklog),n=o.a.parseValueByType(s,a,t.separator,t.worklog);if(n=!isNaN(n)&&n,r)t.rangeFilterValues={from:n,type:s};else{t.rangeFilterValues.type&&(s=t.rangeFilterValues.type),t.rangeFilterValues.to=n;var c=e.parent().parent();if(!1!==t.rangeFilterValues.from||!1!==t.rangeFilterValues.to){var d=[];t.rawTables.forEach((function(e,a){var r=o.a.getCellPositions(e,l);d[a]=[],r.length&&e.forEach((function(e,l){if(l>0){var n=!0;r.forEach((function(a){var l=e[a]||"";try{var r=o.a.parseValueByType(s,l,t.separator,t.worklog);isNaN(r)?n=n&&!i:i?!1!==t.rangeFilterValues.from?n=!1!==t.rangeFilterValues.to?n&&t.rangeFilterValues.from<=r&&t.rangeFilterValues.to>=r:n&&t.rangeFilterValues.from<=r:!1!==t.rangeFilterValues.to&&(n=n&&t.rangeFilterValues.to>=r):!1!==t.rangeFilterValues.from?n=!1!==t.rangeFilterValues.to?n&&(t.rangeFilterValues.from>r||t.rangeFilterValues.to<r):n&&t.rangeFilterValues.from>r:!1!==t.rangeFilterValues.to&&(n=n&&t.rangeFilterValues.to<r)}catch(e){n=!1,AJS.log("Error while filtering number '"+l+"': "+e)}})),n=t.isAND?n:!n,d[a][l-1]=n?!t.isAND:t.isAND}}))})),c.data("state",d),c.data("filtered",!0)}else c.data("state",[]),c.data("filtered",!1)}},f.prototype.treatColumnFilter=function(e){var t=this;t.updateSparkline=!0;var a=[];e.find("option:selected").each((function(){var e=$.trim(this.textContent);e=="-Empty-"&&(e=""),a.push(e.toLocaleLowerCase())}));var l=e.hasClass("inverse"),i=e.parent();if(0!=a.length){var r=[];t.rawTables.forEach((function(e,i){r[i]=[];var s=e[0]||[];s.forEach((function(e,n){l!=$.inArray(o.a.clearStringLowerCase(e),a)>=0&&(r[i].push(n),n==s.length-1&&(t.updateSparkline=!1))}))})),i.data("state",r)}else i.data("state",[])},f.prototype.showOrHide=function(e,t,a,l,i){var r=this,s=0;if(t>r.headerSize[e])if(!r.cbState[e][t-1]&&i<t)$(a).find("td[rowspan], th[rowspan]").trigger("hideCell"),a.style.display="none";else if(r.numbering&&(-1!=r.numbering.indexOf("dynamic")||"true"==r.numbering)){var o=a.children[0];o.classList.contains("tf-numbering")&&(o.children[0].textContent=l,r.rawTables[e][t][0]=""+l),s=1}if(r.tdNumbers&&r.tdNumbers[e].length){var n=a.children;$.each(r.tdNumbers[e],(function(e,t){$(n[t]).trigger("hideCol").addClass("tf-hidden-column")}))}return s},f.prototype.showTableWithoutFilters=function(){var e=this,t=e.showNRows;e.showNRows="all",e.showTable(!0),e.showOrHideTables(),e.showNRows=t,e.appendTotalRow(),e.appendTotalCol(),e.appendSparklines(),e.sparkline&&e.fixedRows>0&&e.updateFixedCells()},f.prototype.showOrHideTables=function(){var e=this,t=0,a=0;e.tables.each((function(l){var i=$(this),r=e.rows[l],s=i.hasClass("relative-table");r.children(".tf-hidden-column").removeClass("tf-hidden-column"),r.children("[colspan]").each((function(){var e=$(this);e.attr("colspan",$.data(e[0],"colspan"))}));var n=i.children("colgroup").children("col");if(s){var c=0,d=[];n.each((function(){"none"===this.style.display?c+=parseFloat(this.style.width):d.push(this)})),c>0&&(i.css("width",parseFloat(i[0].style.width)/(1-c/100)+"%"),d.forEach((function(e){e.style.width=parseFloat(e.style.width)*(1-c/100)+"%"})))}n.show();var p=i.find("tr.pivot-header, thead.tableFloatingHeader tr");if(p.children(".tf-hidden-column").removeClass("tf-hidden-column"),e.tdNumbers&&e.tdNumbers[l].length){c=0;$.each(e.tdNumbers[l],(function(e,t){n.eq(t).hide(),s&&(c+=parseFloat(n[t].style.width)),p.each((function(){$(this).find("th, td").eq(t).trigger("hideCol").addClass("tf-hidden-column")}))})),c>0&&(i.css("width",parseFloat(i[0].style.width)*(1-c/100)+"%"),n.each((function(t){-1===e.tdNumbers[l].indexOf(t)&&(this.style.width=parseFloat(this.style.width)/(1-c/100)+"%")})))}i.is(".attachments")&&i.find(".attachment-summary").each((function(t){e.cbState[l][t]||($(this).addClass("hidden"),r.eq(t+1).find(".icon-section-opened").removeClass("icon-section-opened").addClass("icon-section-closed"))}));var f=r.children(".fake").hide();r.children("td[rowspan], th[rowspan]").each((function(){this.rowSpan=$.data(this,"rowspan")||1})),r.css("display",""),t+=r.length-1;var u=/^\d+\*$/i.test(e.showNRows)&&0!=e.showNRows&&e.showNRows.indexOf("*")===e.showNRows.length-1?parseInt(e.showNRows.replace("*","")):-1,b=$.grep(e.cbState[l],(function(e,t){return e||u>t})).length,h=1,m=1;if(e.numbering&&-1!=e.numbering.indexOf("desc")&&(h=b,m=-1),r.each((function(t){h+=e.showOrHide(l,t,this,h,u)*m})),/^\d+\+?$/i.test(e.showNRows)&&(0!=e.showNRows&&e.showNRows.indexOf("+")!=e.showNRows.length-1||b==r.length-1)){var v=e.showNRows.replace("+","");r.filter((function(){return o.a.isRowVisible(this)})).filter(":gt("+v+")").hide(),b=Math.min(b,v)}e.editorMacro&&(f.filter("[rowspan]:not(:visible)").attr("rowspan",-1),f.filter("[colspan]:not(:visible)").attr("colspan",-1)),a+=b}));var l=e.comboBoxDiv.find(".filter-logo");t==a?l.removeClass("filtered").addClass("default").attr("title",AJS.format("Nothing filtered. Showing {0} rows",t)):l.removeClass("default").addClass("filtered").attr("title",AJS.format("Showing {0} of {1} rows",a,t)),e.resize&&e.resize();var i={id:"tf-table-"+e.macroId,tf:e,macroId:e.macroId};e.blockEvent||e.tableWrapper.trigger("tf-filtered",i),e.tables.trigger("tf-filtered-charts").trigger("scroll-tf"),e.comboBoxDiv.parents(".tablefilter-table-wrapper, .pivot-content, table").eq(0).data("inner-filter",i)},f.prototype.appendSparklines=function(){var e=this;if(e.pauseUpdate=!0,e.setMutationObserver(!0),e.spakLinesFinished=!0,e.sparkline)e.rows.forEach((function(t,a){var l,i;l=t.add(e.totalRows[a]),i=null,l.each((function(t,a){var l=$(a);l.find(".tf-sparkline-header, .tf-sparkline-container").remove();var r=(l.find(":first-child").attr("class")||"").replace("tf-numbering","").replace("tf-hidden-column","");if(0==t)l.append('<th class="'+(void 0!==r?r:"")+' tf-sparkline-header synchrony-exclude" contenteditable="false" data-sorter="false"><div>'+e.sparkName+"</div></th>");else{var s=[];if(l.children("td, th").not(".tf-numbering, .total-col, .numberingColumn").each((function(t){if($(this).hasClass("tf-hidden-column"))return!0;var a=o.a.clearString(this.textContent);null==i&&a&&(i=o.a.getValueType(a,e.separator,e.worklog,!0));var l=o.a.parseValueByType(i,a,e.separator,e.worklog,!0);isNaN(l)||s.push(l)})),l.append('<td id="sparkline-container-'+t+'" class="'+(void 0!==r?r:"")+' tf-sparkline-container synchrony-exclude" contenteditable="false"></td>'),function(e,t,a){var l=100,i=25,r=$('<svg xmlns="http://www.w3.org/2000/svg"/>').attr("width",l).attr("height",i),s=$(document.createElementNS("http://www.w3.org/2000/svg","path")).attr("d",function(e){if(e.length>1){var t=l/(e.length-1),a=Math.min.apply(Math,p(e)),r=Math.max.apply(Math,p(e))-a,s=0===r?i/2:i/r,o=e.map((function(e,l){return[t*l,0===r?s:i-s*(e-a)]}));return"M".concat(o.join("L"))}return""}(a)).attr("style","stroke: rgb(100, 100, 255); stroke-width: 1; fill: none;");r.append(s),e.find("#sparkline-container-"+t).append(r)}($(this),t,s),!e.editorMacro){var n=l.find("svg").attr("version",1.1).prop("outerHTML");if("undefined"!=typeof btoa&&n){l.find("#sparkline-container-"+t).append("<canvas></canvas>");var c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n))),d=l.find("canvas").attr("width",100).attr("height",25)[0],f=d.getContext("2d"),u=new Image;u.src=c,u.onload=function(){f.drawImage(u,0,0);var e='<img src="'+d.toDataURL("image/png")+'">';l.find("#sparkline-container-"+t).html(e)}}}}}))})),e.updateSorterAndRawTables(!0),e.pauseUpdate=!1,e.setMutationObserver(!0);else{var t=e.tableWrapper.find(".tf-sparkline-header, .tf-sparkline-container"),a=t.length;t.remove(),e.updateSorterAndRawTables(a>0),e.pauseUpdate=!1,e.setMutationObserver(!0)}},f.prototype.appendTotalRow=function(){var e=this;if(e.pauseUpdate=!0,e.setMutationObserver(!0),e.tables.find("tr.total-row").remove(),e.totalRows=[],e.totalRow.length){var t=0;e.tableUpdated=!0,e.rawTables.forEach((function(a,l){for(var i={},r=e.numbering?1:0,s=e.rows[l].eq(0).children().not(".tf-sparkline-header, .total-col").length-r,n=t;n<s+t;n++)if(e.totalRow[n]){var c=h,p=!1,f=!1,y=!1;"Sum"==e.totalRow[n]?c=b:"Min"==e.totalRow[n]?c=m:"Max"==e.totalRow[n]?c=v:"Multiplication"==e.totalRow[n]?c=u:"Count"==e.totalRow[n]?(c=g,f=!0):"Count not empty"==e.totalRow[n]?(c=g,y=!0):p=!0,i[n-t+r]={calc:c,isAvg:p,isCount:f,isCountA:y}}t+=s;var x=null;if(Object.keys(i).length){var T={},C={};a.forEach((function(t,a){a>0&&o.a.isRowVisible(e.rows[l][a])&&$.each(i,(function(i,r){if(r.isCount)r.calc();else if(r.isCountA)(t[i]||e.rawIconTables[l][a][i])&&r.calc();else{null==T[i]&&t[i]&&(T[i]=o.a.getValueType(t[i],e.separator,e.worklog));var s=o.a.parseValueByType(T[i],t[i],e.separator,e.worklog);o.a.isNumber(s)&&(r.calc(s),T[i]!==o.a.number||C[i]||(C[i]=o.a.getNumberFormatter(t[i])))}}))}));var S=!1,k=!0;if($.each(i,(function(t,a){a.total=o.a.formatValueByType(a.total,T[t],(function(l){if(void 0!==l){S=!0,a.isAvg&&(l=w(l));var i=e.formatDecimal.to(l);return C[t]?C[t](i):i}return""}),e.worklog),""!==a.total&&(S=!0)})),S){if(x=$(d.a.totalRow({title:e.totalRowName,length:s+r,totals:i,numbering:r})),e.tdNumbers&&e.tdNumbers[l].length){k=!1;var I=x.children("td,th");$.each(e.tdNumbers[l],(function(e,t){I.eq(t).addClass("tf-hidden-column")})),$.each(I,(function(e,t){if(t.textContent&&!$(t).hasClass("tf-hidden-column"))return k=!0,!1}))}k&&e.tables.eq(l).append(x)}}e.totalRows.push(x),e.updateSorterAndRawTables(!1,!0)}))}e.pauseUpdate=!1,e.setMutationObserver(!0)},f.prototype.appendTotalCol=function(){var e=this;if(!o.a.hasLoadingContent(e.tableWrapper)){e.pauseUpdate=!0,e.setMutationObserver(!0);var t=!1;if(e.totalCol){var a=h,l=!1,i=e.totalCol;"Sum"==e.totalCol?a=b:"Min"==e.totalCol?a=m:"Max"==e.totalCol?a=v:"Multiplication"==e.totalCol?(a=u,i="Product"):l=!0,i=e.totalColName?e.totalColName:i,e.tables.each((function(t){var r=null,s=null;if(e.rows[t].length&&e.rows[t][0].classList.contains("tf-header-hidden")){var n=this.rows,c=$(n[1]);if(0===c.children("th.total-col").length){var p=$('<th class="total-col confluenceTh"></th>').text(i);c.append(p);for(var f=2;f<n.length&&n[f].classList.contains("pivot-header");f++)$(n[f]).append('<th class="total-col confluenceTh"></th>')}}e.rows[t].add(e.totalRows[t]).each((function(t){for(var n={calc:a},c=this.children,p=null,f=c.length-1;f>=0;f--)if(c[f].classList.contains("total-col")){p=$(c[f]);break}if(p||(p=$(d.a.totalCol({rowNumber:t})),$(this).append(p)),0===t)p.find("p").text(i);else{for(f=0;f<c.length;f++){var u=c[f];if(!u.classList.contains("tf-numbering")&&!u.classList.contains("total-col")&&!u.classList.contains("numberingColumn")){if(!u.classList.contains("tf-hidden-column")){var b=o.a.clearString(u.textContent);null==r&&b&&(r=o.a.getValueType(b,e.separator,e.worklog,!0));var h=o.a.parseValueByType(r,b,e.separator,e.worklog,!0);o.a.isNumber(h)&&(n.calc(h),r!==o.a.number||s||(s=o.a.getNumberFormatter(b)))}0}}var m=o.a.formatValueByType(n.total,r,(function(t){if(void 0===t)return"";l&&(t=w(t));var a=e.formatDecimal.to(t);return s?s(a):a}),e.worklog),v=p.attr("contenteditable","false").children("p");v.length||(v=$("<p></p>"),p.prepend(v)),v.text(m)}}))})),t=!0}else{var r=e.tables.find("th.total-col");r.length&&(t=!0,r.remove())}return t&&e.updateSorterAndRawTables(!0,!0),e.pauseUpdate=!1,e.setMutationObserver(!0),t}},f.prototype.updateSorterAndRawTables=function(e,t){var a=this;a.shouldUpdateSorter=a.shouldUpdateSorter||t,a.shouldUpdateRawTables=a.shouldUpdateRawTables||e,a.spakLinesFinished&&(a.shouldUpdateSorter&&(a.tables.not(".pivot-table-result").trigger("updateAll",!1),a.tables.not(".pivot-table-result").trigger("update",!1)),a.shouldUpdateRawTables&&a.updateRawTables(),a.shouldUpdateSorter=!1,a.shouldUpdateRawTables=!1,a.spakLinesFinished=!1)},f.prototype.bindChangeLabel=function(){var e=this;e.comboBoxDiv.delegate(".filter-container label.hideble","dblclick",(function(){var t=$(this).find(".tf-label-name"),a=!0,l=$(this).parent(),i=t.css("width");t.hide(),l.prepend(d.a.labelChanger({value:t.text(),width:parseInt(i,10)+6+"px"}));var r=!1,s=l.find(".tf-label-changer");s.focus(),s.bind("keydown",(function(l){13==l.keyCode&&(t.text(s.val()),s.remove(),t.show(),a=!1,e.enableSaveBtn()),32==l.keyCode&&(r=!0)})),s.bind("input",(function(){var e=s.textWidth(s.html())+6;r&&(e+=4,r=!1),s.css("width",(e<10?10:e)+"px")})),$(document).one("click",(function(e){!$(e.target).closest(".tf-label-changer").length&&a&&(s.remove(),t.show(),a=!1)}))})),$.fn.textWidth=function(e,t){return $.fn.textWidth.fakeEl||($.fn.textWidth.fakeEl=$("<span>").hide().appendTo(document.body)),$.fn.textWidth.fakeEl.text(e||this.val()||this.text()).css("font",t||this.css("font")),$.fn.textWidth.fakeEl.width()}},f.prototype.getFilterLabels=function(){var e=this,t=[];return a(".selectfilter-element"),a(".userfilter-element"),a(".numberfilter-element"),a(".datefilter-element"),a(".globalfilter-element"),a(".columnhider-element"),a(".iconfilter-element"),t.join("‚");function a(a){e.comboBoxDiv.find(a+" .tf-label-name").each((function(){t.push($(this).text())}))}},f.prototype.setPagination=function(){var e=this;e.pageSize&&e.tables.each((function(t){$(this),e.cbState[t].reduce((function(e){return!e}))}))},t.a=f},13:function(e,t){if(window.TableFilterTemplate=window.TableFilterTemplate||{},void 0===a)var a={};a.totalRow=function(e,t){for(var a='<tr class="total-row synchrony-exclude">',l=e.length,i=0;i<l;i++)a+=1==e.numbering&&0==i?'<td class="confluenceTd" contenteditable="false"></td>':'<th class="confluenceTh '+(e.totals[i]?"number":"")+'" contenteditable="false">'+(e.totals[i]?soy.$$escapeHtml(e.totals[i].total):i-e.numbering==0?e.title?soy.$$escapeHtml(e.title):soy.$$escapeHtml("Total\u200b"):"")+"</th>";return a+="</tr>"},goog.DEBUG&&(a.totalRow.soyTemplateName="TableFilterTemplate.totalRow"),a.totalCol=function(e,t){return'<th class="total-col synchrony-exclude confluenceTh '+(e.rowNumber>0?"number":"")+'" contenteditable="false"><p></p></th>'},goog.DEBUG&&(a.totalCol.soyTemplateName="TableFilterTemplate.totalCol"),a.labelChanger=function(e,t){return'<input class="tf-label-changer text" onfocus="this.select();" type="text" value="'+soy.$$escapeHtml(e.value)+'" style="width: '+soy.$$escapeHtml(e.width)+';" title="'+soy.$$escapeHtml("Press the Enter button to change the filter label")+'">'},goog.DEBUG&&(a.labelChanger.soyTemplateName="TableFilterTemplate.labelChanger"),a.editorCloseButton=function(e,t){return'<div class="aui-buttons close"><button type="button" class="aui-button" data-tooltip="'+soy.$$escapeHtml("Close")+'" original-title=""><span class="icon icon-close aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+"</span></button></div>"},goog.DEBUG&&(a.editorCloseButton.soyTemplateName="TableFilterTemplate.editorCloseButton"),a.addFilterDialog=function(e,t){var a='<form class="aui top-label inline-dialog-form tf-add-filter-dialog" style="padding: 10px">';if(e.filters.length>0||e.globalfilter||e.columnhider){for(var l=e.filters,i=l.length,r=0;r<i;r++){var s=l[r];a+='<div class="'+soy.$$escapeHtml(s.type)+' tf-add-filter-column"><label for="'+soy.$$escapeHtml(s.type)+'">'+soy.$$escapeHtml("Filter Column")+'</label><select class="select '+soy.$$escapeHtml(s.type)+'" name="'+soy.$$escapeHtml(s.type)+'">';for(var o=s.columns,n=o.length,c=0;c<n;c++){var d=o[c];a+='<option value="'+soy.$$escapeHtml(d)+'">'+soy.$$escapeHtml(d)+"</option>"}a+="</select></div>"}a+='<div><label for="filter-type">'+soy.$$escapeHtml("Filter Type")+'</label><select class="select filter-type" name="filter-type">';for(var p=e.filters,f=p.length,u=0;u<f;u++){var b=p[u];a+='<option value="'+soy.$$escapeHtml(b.type)+'" title="'+soy.$$escapeHtml(b.desc)+'">'+soy.$$escapeHtml(b.name)+"</option>"}a+=(e.globalfilter?'<option value="globalfilter" title="'+soy.$$escapeHtml("Enter custom text query or regular expression to filter data in the whole table")+'">'+soy.$$escapeHtml("Global Filter")+"</option>":"")+(e.columnhider?'<option value="columnhider" title="'+soy.$$escapeHtml("Select table columns to hide")+'">'+soy.$$escapeHtml("Hide Columns")+"</option>":"")+'</select></div><div class="date-format-param"><label for="date-format-input">'+soy.$$escapeHtml("Date format")+'</label><input class="date-format-input text" type="text" value="'+soy.$$escapeHtml(e.dateFormat)+'"></div><div class="buttons-container"><div class="buttons"><input class="aui-button" type="button" value="'+soy.$$escapeHtml("Add filter")+'" id="save"/><a class="cancel" id="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div>"}else a+='<div class="aui-message info aui-message-info"><p>'+soy.$$escapeHtml("Filters are not available")+'</p></div><div class="buttons-container"><div class="buttons"><a class="cancel" id="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div>";return a+="</form>"},goog.DEBUG&&(a.addFilterDialog.soyTemplateName="TableFilterTemplate.addFilterDialog"),a.changeSettingsDialog=function(e,t){return'<form class="aui top-label inline-dialog-form" style="padding: 10px" onsubmit="return false;"><div class="change-settings-dialog-parameter"><label for="tf-cs-dialog-datepattern">'+soy.$$escapeHtml("Date format")+'</label><input type="text" class="text" id="tf-cs-dialog-datepattern" value="'+soy.$$escapeHtml(e.datepattern)+'"></div><div class="buttons-container"><div class="buttons"><input class="aui-button" type="button" value="'+soy.$$escapeHtml("Update")+'" id="tf-cs-save"/><a class="cancel" id="tf-cs-cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},goog.DEBUG&&(a.changeSettingsDialog.soyTemplateName="TableFilterTemplate.changeSettingsDialog"),a.filter=function(e,t){return"selectfilter"==e.type?'<div class="filter-container selectfilter-element sortable"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.column)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="select" name="'+soy.$$escapeHtml(e.column)+'" style="width: 150px;" multiple data-width="150px"></select></div>':"userfilter"==e.type?'<div class="filter-container userfilter-element sortable input"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.column)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="tf-resizeable" style="width: 150px;"><input class="user-filter text" type="text" name="'+soy.$$escapeHtml(e.column)+'" style="width: 100%; max-width: none;" placeholder="'+soy.$$escapeHtml("Start typing...\u200b")+'" data-width="150px"/></div></div>':"numberfilter"==e.type?'<div class="filter-container numberfilter-element sortable"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.column)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="range numbers" name="'+soy.$$escapeHtml(e.column)+'">'+soy.$$escapeHtml("from")+'<input class="number from text" type="text" name="'+soy.$$escapeHtml(e.column)+'" style="width: 90px;" placeholder="'+soy.$$escapeHtml("Type value")+'"/>'+soy.$$escapeHtml("to")+'<input class="number to text" type="text" name="'+soy.$$escapeHtml(e.column)+'" style="width: 90px;" placeholder="'+soy.$$escapeHtml("Type value")+'"/></div></div>':"datefilter"==e.type?'<div class="filter-container datefilter-element sortable"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.column)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="range dates" name="'+soy.$$escapeHtml(e.column)+'">'+soy.$$escapeHtml("from")+'<input class="date from text" type="text" name="'+soy.$$escapeHtml(e.column)+'" style="width: 93px;" placeholder="'+soy.$$escapeHtml("Pick date")+'"/>'+soy.$$escapeHtml("to")+'<input class="date to text" type="text" name="'+soy.$$escapeHtml(e.column)+'" style="width: 93px;" placeholder="'+soy.$$escapeHtml("Pick date")+'"/></div></div>':"globalfilter"==e.type?'<div class="filter-container globalfilter-element sortable input"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml("Global filter")+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="tf-resizeable" style="width: 150px;"><input class="global-filter text" type="text" style="width: 100%; max-width: none;" placeholder="'+soy.$$escapeHtml("Start typing...\u200b")+'" data-width="150px"/></div></div>':"columnhider"==e.type?'<div class="filter-container columnhider-element sortable"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml("Hide columns")+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="column-select" style="width: 150px;" multiple data-width="150px"></select></div>':"iconfilter"==e.type?'<div class="filter-container iconfilter-element sortable"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.column)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="icon-select" name="'+soy.$$escapeHtml(e.column)+'" style="width: 150px;" multiple data-width="150px" data-html="true"></select></div>':""},goog.DEBUG&&(a.filter.soyTemplateName="TableFilterTemplate.filter"),a.panel=function(e,t){var a='<div class="tablefilter-outer-wrapper'+(e.isCloud?" tf-cloud-macro":"")+" "+(e.hideLabels?"hide-labels":"")+" "+(e.hidePane?"hide-pane":"")+(e.hideControls?" hide-controls":"")+'" data-id="'+soy.$$escapeHtml(e.macroId)+'" data-pageid="'+soy.$$escapeHtml(e.pageId)+'" data-export-hash="'+soy.$$escapeHtml(e.exportHash)+'" data-sessionid="'+soy.$$escapeHtml(e.sessionId)+'">';if(!e.isEmail){a+='<div id="comboBoxDiv-'+soy.$$escapeHtml(e.macroId)+'" class="tableFilterCbStyle"><div class="lockDisabled not-empty"><form class="aui tf-form" name="inlinecommentform" onsubmit="return false;" onkeydown="return event.keyCode != 13;"><div class="filter-container filter-icon filter-logo default '+(e.fd?"tf-fd":"")+'" title="'+soy.$$escapeHtml(AJS.format("Nothing filtered. Showing {0} rows",0))+'"></div><div class="filter-buttons-container"><div class="tf-menu-buttons aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="tf-btn-container"><div class="tf-btn-row"><button class="filter-reset aui-button aui-button-subtle" title="'+soy.$$escapeHtml("Reset all filters")+'"></button><button class="disableLock aui-button aui-button-subtle" title="'+soy.$$escapeHtml("Disable all filters")+'"></button></div><div id="tf-settings-row-'+soy.$$escapeHtml(e.macroId)+'" class="tf-btn-row"><div class="tf-settings-wrapper"><button id=\'filter-settings-'+soy.$$escapeHtml(e.macroId)+'\' class="filter-settings aui-button aui-button-subtle aui-dropdown2-trigger" aria-owns="filter-menu-view-'+soy.$$escapeHtml(e.macroId)+"-"+soy.$$escapeHtml(e.pageId)+'" aria-haspopup="true" data-container="" resolved="" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span><span class="tfac-unsaved">*</span></button><div id="filter-menu-view-'+soy.$$escapeHtml(e.macroId)+"-"+soy.$$escapeHtml(e.pageId)+'" class="aui-style-default aui-dropdown2" style="display: none; z-index: 3001;"><div class="aui-dropdown2-section"><ul class="aui-list-truncate first">'+(e.editable&&!e.disableSave?'<li><a class="filter-save cursor-pointer tf-disabled-link">'+soy.$$escapeHtml("Save changes")+'<span class="tfac-unsaved">*</span></a></li>':"")+'<li><a class="filter-add cursor-pointer">'+soy.$$escapeHtml("Add filter")+'</a></li><li><a class="filter-sort-reset cursor-pointer tf-disabled-link">'+soy.$$escapeHtml("Reset column sorting")+'</a></li><li><a class="export-file-pdf cursor-pointer">'+soy.$$escapeHtml("Export to PDF")+'</a></li><li><a class="export-file-csv cursor-pointer">'+soy.$$escapeHtml("Export to CSV")+'</a></li><li><a class="export-file-doc cursor-pointer">'+soy.$$escapeHtml("Export to Word")+'</a></li><li><a class="get-tf-url cursor-pointer"'+(e.isCloud?'style="display: none;"':"")+">"+soy.$$escapeHtml("Copy the filter URL")+'</a></li><li><a class="tf-change-settings cursor-pointer">'+soy.$$escapeHtml("Modify Settings")+'</a></li></ul></div><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a target="_blank" href="https://docs.stiltsoft.com/display/TFAC/How+to+use+Table+filter+macro?from=tf-view">'+soy.$$escapeHtml("Documentation")+'</a></li><li><a target="_blank" href="https://docs.stiltsoft.com/display/TFAC/Table+Filter+and+Charts+5.2.0?from=tf-view">'+soy.$$escapeHtml("What\u0027s new")+'</a></li><li><a target="_blank" href="https://www.surveygizmo.com/s3/3338736/Table-Filter-and-Charts-Survey?platform='+(e.isCloud?"cloud":"server")+'" class="tf-menu-star"><span><span class="aui-icon aui-icon-small aui-iconfont-star"></span>'+soy.$$escapeHtml("Rate our app")+'</span></a></li></ul></div></div></div></div></div></div></div></div></div><div class="sortable-container">';for(var l=e.comboBoxes,i=l.length,r=0;r<i;r++){var s=l[r];a+='<div class="filter-container selectfilter-element sortable '+(s.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(s.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="select '+(s.inverse?"inverse":"")+'" name="'+soy.$$escapeHtml(s.name)+'" style="width: '+soy.$$escapeHtml(s.columnWidth)+'px;" multiple data-width="'+soy.$$escapeHtml(s.columnWidth)+'px">';for(var o=s.options,n=o.length,c=0;c<n;c++){var d=o[c];a+='<option selected="selected"'+("-Empty-"==d?'class="tf-empty-option">'+soy.$$escapeHtml("-Empty-"):">"+soy.$$escapeHtml(d))+"</option>"}a+="</select></div>"}for(var p=e.edits,f=p.length,u=0;u<f;u++){var b=p[u];a+='<div class="filter-container userfilter-element sortable input '+(b.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(b.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="tf-resizeable" style="width: '+soy.$$escapeHtml(b.columnWidth)+'px;"><input class="user-filter text '+(b.inverse?"inverse":"")+'" type="text" name="'+soy.$$escapeHtml(b.name)+'" style="width: 100%; max-width: none;" value="'+soy.$$escapeHtml(b.defaultValue)+'" placeholder="'+soy.$$escapeHtml("Start typing...\u200b")+'" data-width="'+soy.$$escapeHtml(b.columnWidth)+'px"/></div></div>'}for(var h=e.numberFilters,m=h.length,v=0;v<m;v++){var g=h[v];a+='<div class="filter-container numberfilter-element sortable '+(g.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(g.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="range numbers" name="'+soy.$$escapeHtml(g.name)+'">'+soy.$$escapeHtml("from")+'<input class="number from text '+(g.inverse?"inverse":"")+'" type="text" name="'+soy.$$escapeHtml(g.name)+'" style="width: 90px;" value="'+soy.$$escapeHtml(g.defaultFromValue)+'" placeholder="'+soy.$$escapeHtml("Type value")+'"/>'+soy.$$escapeHtml("to")+'<input class="number to text '+(g.inverse?"inverse":"")+'" type="text" name="'+soy.$$escapeHtml(g.name)+'" style="width: 90px;" value="'+soy.$$escapeHtml(g.defaultToValue)+'" placeholder="'+soy.$$escapeHtml("Type value")+'"/></div></div>'}for(var w=e.dateFilters,y=w.length,$=0;$<y;$++){var x=w[$];a+='<div class="filter-container datefilter-element sortable '+(x.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(x.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="range dates" name="'+soy.$$escapeHtml(x.name)+'">'+soy.$$escapeHtml("from")+'<input class="date from text '+(x.inverse?"inverse":"")+'" type="text" name="'+soy.$$escapeHtml(x.name)+'" style="width: 93px;" value="'+soy.$$escapeHtml(x.defaultFromValue)+'" placeholder="'+soy.$$escapeHtml("Pick date")+'"/>'+soy.$$escapeHtml("to")+'<input class="date to text '+(x.inverse?"inverse":"")+'" type="text" name="'+soy.$$escapeHtml(x.name)+'" style="width: 93px;" value="'+soy.$$escapeHtml(x.defaultToValue)+'" placeholder="'+soy.$$escapeHtml("Pick date")+'"/></div></div>'}for(var T=e.iconFilters,C=T.length,S=0;S<C;S++){var k=T[S];a+='<div class="filter-container iconfilter-element sortable '+(k.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(k.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="icon-select '+(k.inverse?"inverse":"")+'" name="'+soy.$$escapeHtml(k.name)+'" style="width: '+soy.$$escapeHtml(k.columnWidth)+'px;" multiple data-width="'+soy.$$escapeHtml(k.columnWidth)+'px" data-html="true">';for(var I=k.options,D=I.length,A=0;A<D;A++){var F=I[A];a+='<option selected="selected"'+("-Empty-"==F?'class="tf-empty-option">'+soy.$$escapeHtml("-Empty-"):">"+soy.$$escapeHtml(F))+"</option>"}a+="</select></div>"}if(a+=e.globalFilter?'<div class="filter-container globalfilter-element sortable input '+(e.globalFilter.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.globalFilter.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><div class="tf-resizeable" style="width: '+soy.$$escapeHtml(e.globalFilter.columnWidth)+'px;"><input class="global-filter text '+(e.globalFilter.inverse?"inverse":"")+'" type="text" style="width: 100%; max-width: none;" value="'+soy.$$escapeHtml(e.globalFilter.defaultValue)+'" placeholder="'+soy.$$escapeHtml("Start typing...\u200b")+'" data-width="'+soy.$$escapeHtml(e.globalFilter.columnWidth)+'px"/></div></div>':"",e.hideColumns){a+='<div class="filter-container columnhider-element sortable '+(e.hideColumns.inverse?"inverse":"")+'"><label class="hideble"><span class="tf-label-name" title="'+soy.$$escapeHtml("Drag to reorder/remove the filter\nDouble-click to edit the filter label")+'">'+soy.$$escapeHtml(e.hideColumns.label)+'</span><span class="eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;=</span><span class="not-eq" title="'+soy.$$escapeHtml("Click to reverse the filter")+'">&nbsp;&ne;</span></label><select class="column-select '+(e.hideColumns.inverse?"inverse":"")+'" style="width: '+soy.$$escapeHtml(e.hideColumns.columnWidth)+'px;" multiple data-width="'+soy.$$escapeHtml(e.hideColumns.columnWidth)+'px">';for(var H=e.hideColumns.options,B=H.length,J=0;J<B;J++){var R=H[J];a+='<option selected="selected"'+("-Empty-"==R?'class="tf-empty-option">'+soy.$$escapeHtml("-Empty-"):">"+soy.$$escapeHtml(R))+"</option>"}a+="</select></div>"}a+='</div><div class="filter-container show-n-rows-only-message"><label>'+soy.$$escapeHtml(AJS.format("Showing the first {0} rows",e.showNRows))+'</label></div><div class="filter-container empty-message"><label>'+soy.$$filterNoAutoescape("Start \u003ca class=\u0022tf-add-start\u0022\u003eadding filters\u003c/a\u003e in the filter tools menu.")+'</label></div></form></div><div class="lockEnabled"><div class="filter-container filter-icon filter-logo default" title="'+soy.$$escapeHtml(AJS.format("Nothing filtered. Showing {0} rows",0))+'"></div><div class="lockPosition"><div class="filter-container"><label class="hideble">'+soy.$$escapeHtml("The filter is disabled at the moment.")+'</label></div><div class="tf-menu-buttons aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="tf-btn-container"><div class="tf-btn-row"><button class="filter-reset aui-button aui-button-subtle" disabled="disabled"></button><button class="enableLock aui-button aui-button-subtle" title="'+soy.$$escapeHtml("Enable all filters")+'"></button></div><div class="tf-btn-row settings-row"><div class="tf-settings-wrapper"><button class="filter-settings aui-button aui-button-subtle aui-dropdown2-trigger" aria-owns="filter-menu-view-lock-'+soy.$$escapeHtml(e.macroId)+"-"+soy.$$escapeHtml(e.pageId)+'"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span></button><div id="filter-menu-view-lock-'+soy.$$escapeHtml(e.macroId)+"-"+soy.$$escapeHtml(e.pageId)+'" class="aui-style-default aui-dropdown2" style="display: none; z-index: 3001;"><div class="aui-dropdown2-section"><ul class="aui-list-truncate first"><li><a class="export-file-pdf cursor-pointer">'+soy.$$escapeHtml("Export to PDF")+'</a></li><li><a class="export-file-csv cursor-pointer">'+soy.$$escapeHtml("Export to CSV")+'</a></li><li><a class="export-file-doc cursor-pointer">'+soy.$$escapeHtml("Export to Word")+'</a></li></ul></div><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a target="_blank" href="https://docs.stiltsoft.com/display/TFAC/How+to+use+Table+filter+macro?from=tf-view">'+soy.$$escapeHtml("Documentation")+'</a></li><li><a target="_blank" href="https://docs.stiltsoft.com/display/TFAC/Table+Filter+and+Charts+5.2.0?from=tf-view">'+soy.$$escapeHtml("What\u0027s new")+'</a></li><li><a target="_blank" href="https://www.surveygizmo.com/s3/3338736/Table-Filter-and-Charts-Survey?platform='+(e.isCloud?"cloud":"server")+'" class="tf-menu-star"><span><span class="aui-icon aui-icon-small aui-iconfont-star"></span>'+soy.$$escapeHtml("Rate our app")+'</span></a></li></ul></div></div></div></div></div></div></div></div></div></div><div class="filter-container no-table-message"><div class="aui-message info aui-message-info"><p>'+soy.$$escapeHtml("Oops, it seems that you need to place a table or a macro generating a table within the Table Filter macro.")+'</p></div></div><div class="filter-container waiting-for-table"><div class="aui-message info aui-message-info"><p>'+soy.$$escapeHtml("The table is being loaded. Please wait for a bit ...")+'<span class="aui-icon aui-icon-wait" style="margin-left: 5px"></span></p></div></div><div class="tf-hider-wrapper" title="'+soy.$$escapeHtml("Hide filtration pane")+'"><div class="tf-hider"><span class="tf-hide-show-icon"></span></div></div></div><div id="tf-shower-'+soy.$$escapeHtml(e.macroId)+'" class="tf-shower-wrapper" title="'+soy.$$escapeHtml("Show filtration pane")+'"><div class="tf-shower"><span class="tf-hide-show-icon"></span></div></div>'}return a+=(e.isEditor?"":'<div id="tf-table-'+soy.$$escapeHtml(e.macroId)+'" class="tablefilter-table-wrapper '+(e.isCloud?"tf-cloud-table":"")+'">'+soy.$$filterNoAutoescape(e.body)+"</div>")+"</div>"},goog.DEBUG&&(a.panel.soyTemplateName="TableFilterTemplate.panel"),a.fail=function(e,t){return'<div class="tablefilter-outer-wrapper error"><div class="tableFilterCbStyle"><div class="filter-container"><div class="aui-message warning aui-message-warning"><p>'+("no_table"==e.failureCause?"Oops, it seems that you need to place a table or a macro generating a table within the Table Filter macro.":"license"==e.failureCause?AJS.format("Table Filter Plugin license is not active, please \u003ca href=\u0022{0}/plugins/servlet/upm#manage/com.stiltsoft.confluence.plugin.tablefilter.tablefilter\u0022\u003egenerate a trial license or purchase\u003c/a\u003e the product.",e.contextPath):"bad_request"==e.failureCause?"Oops! We are sorry but the Table Filter macro cannot be previewed on Confluence page.":"no_params"==e.failureCause?"table-filter.fail.no-params = Oops! It seems that the macro body is not reachable as the macro ID parameter is missing.":"Oops! We are sorry but the current complex table cannot be filtered.")+'</p></div></div></div><div class="tablefilter-table-wrapper">'+e.body+"</div></div>"},goog.DEBUG&&(a.fail.soyTemplateName="TableFilterTemplate.fail"),e.exports=a},59:function(e,t){$.fn.tableHeadFixer=function(e){return this.each((function(){t.call(this)}));function t(){var t=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)?'contenteditable="false"':"",a='<span class="tf-fixed-column-border left synchrony-exclude" '+t+'></span><span class="tf-fixed-column-border right synchrony-exclude" '+t+'></span><span class="tf-fixed-column-border bottom synchrony-exclude" '+t+"></span>",l=$.extend({},{head:!0,foot:!1,left:0,right:0,"z-index":1},e);function i(){if(l.head>0){var e=l.parent.scrollTop();l.headCells.css("top",e)}if(l.left>0){var t=l.parent.scrollLeft();l.leftColumns.css("left",t)}}function r(e,t){for(var a=l.left,i=0;i<a;i++){var r=e.children[i];if(r){var s=r.colSpan>1;s&&(i+=r.colSpan-1),r&&(!s||$(r).position().left+r.clientWidth<l.parentWidth)&&t(r)}}}l.table=this,l.parent.bind("scroll scroll-tf",i),l.head>0&&function(){for(var e=[],t=l.table.rows,i=0;i<l.head;i++){var r=t[i];if(r){var s=r.children;if(s.length)for(var o=0;o<s.length;o++){var n=s[o];n&&(e.push(n),l.left<=o&&n.insertAdjacentHTML("beforeend",a))}else l.head++}}l.headCells=$(e),l.headCells.addClass("tf-floating tf-float-head").css("top",0)}(),l.left>0&&function(){var e=l.table,t=[],i=e.rows;l.parentWidth=l.parent.width();for(var s=0;s<i.length;s++)r(i[s],(function(e){t.push(e),e.insertAdjacentHTML("beforeend",a)}));l.leftColumns=$(t),l.leftColumns.addClass("tf-floating").css("left",0)}(),function(){if(l.head>0&&l.left>0)for(var e=l.table.rows,t=0;t<l.head;t++){var a=e[t];if(a)for(var i=a.children,r=0;r<l.left;r++)i[r]&&(i[r].style["z-index"]=3)}}(),$(window).resize(i)}}},60:function(e,t,a){}}]);
}catch(e){WRMCB(e)};