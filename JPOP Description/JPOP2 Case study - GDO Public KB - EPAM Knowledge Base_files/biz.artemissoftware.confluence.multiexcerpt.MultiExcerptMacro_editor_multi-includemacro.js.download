WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'biz.artemissoftware.confluence.multiexcerpt.MultiExcerptMacro:editor_multi-includemacro', location = 'js/multi-include-macro.js' */
AJS.bind("init.rte",function(){var a=AJS.Meta.get("context-path"),d=AJS.Meta.get("content-id"),c="plugins/servlet/confluence/include-page-macro/goto",b=function(e,k){var j=AJS.$(e),f=encodeURIComponent(k),h=a+"/"+c+"?location="+f+"&contentId="+d,g=(AJS.$.browser&&AJS.$.browser.msie)?"_blank":"confluence-goto-link-include-macro-"+e.id,i=window.open(h,g);if(i){i.focus()}};AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("mep-goto-page",function(i,g){var h="meh";var j=AJS.$(g).attr("data-macro-parameters").split("|");AJS.$.each(j,function(k,n){var e=n.indexOf("=");if(e>0){var l=n.substring(0,e);var m=n.substring(e+1);if(l.indexOf("PageWithExcerpt")!==-1){h=m}console.log(l+" = "+m)}});var f=AJS.$("td.wysiwyg-macro-body",g);console.log("body: "+f.html());b(g,h)});AJS.Confluence.PropertyPanel.Macro.registerButtonHandler("mep-find-includes",function(h,f){AJS.$("#includes-dialog").remove();var i=AJS.$(f).attr("data-macro-parameters").split("|");var g="";AJS.$.each(i,function(j,m){var e=m.indexOf("=");if(e>0){var k=m.substring(0,e);var l=m.substring(e+1);if(k.indexOf("MultiExcerptName")!==-1){g=l}}});AJS.$.ajax({url:AJS.contextPath()+"/rest/multiexcerpt/1.0/pages",data:{excerptName:g},success:function(j){var e=Multiexcerpt.Templates.Dialogs.includesDialog({pages:j});AJS.$("body").append(e);AJS.dialog2("#includes-dialog").show()},error:function(e){console.log(e)}})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'biz.artemissoftware.confluence.multiexcerpt.MultiExcerptMacro:editor_multi-includemacro', location = '/soy/templates-multiexcerpt.soy' */
// This file was automatically generated from templates-multiexcerpt.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Multiexcerpt.Templates.Dialogs.
 */

if (typeof Multiexcerpt == 'undefined') { var Multiexcerpt = {}; }
if (typeof Multiexcerpt.Templates == 'undefined') { Multiexcerpt.Templates = {}; }
if (typeof Multiexcerpt.Templates.Dialogs == 'undefined') { Multiexcerpt.Templates.Dialogs = {}; }


Multiexcerpt.Templates.Dialogs.includesDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="includes-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true" persistent><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Pages with includes') + '</h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a></header><div class="aui-dialog2-content">' + Multiexcerpt.Templates.Dialogs.pages(opt_data) + '</div></section>';
};
if (goog.DEBUG) {
  Multiexcerpt.Templates.Dialogs.includesDialog.soyTemplateName = 'Multiexcerpt.Templates.Dialogs.includesDialog';
}


Multiexcerpt.Templates.Dialogs.pages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.pages.length > 0) {
    output += '<ul>';
    var pageList13 = opt_data.pages;
    var pageListLen13 = pageList13.length;
    for (var pageIndex13 = 0; pageIndex13 < pageListLen13; pageIndex13++) {
      var pageData13 = pageList13[pageIndex13];
      output += '<li style="list-style: none;"><a href="' + soy.$$escapeHtml("" + '/pages/viewpage.action?pageId=' + pageData13.contentId) + '">' + soy.$$escapeHtml(pageData13.spaceKey) + ': ' + soy.$$escapeHtml(pageData13.pageTitle) + '</a></li>';
    }
    output += '</ul>';
  } else {
    output += '<div>' + soy.$$escapeHtml('There are no pages with this Multi excerpt') + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  Multiexcerpt.Templates.Dialogs.pages.soyTemplateName = 'Multiexcerpt.Templates.Dialogs.pages';
}

}catch(e){WRMCB(e)};