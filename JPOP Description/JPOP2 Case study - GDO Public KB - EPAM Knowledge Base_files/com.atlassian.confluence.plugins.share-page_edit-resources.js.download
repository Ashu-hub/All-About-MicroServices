WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:edit-resources', location = 'js/edit-init.js' */
require(["ajs","confluence/meta","confluence/share-page/service/share-page"],function(a,b,c){if(b.get("edit-mode")!=="collaborative"||!b.get("remote-user")){return}if(a.Rte.getEditor()&&a.Rte.getEditor().initialized){d()}else{a.bind("rte-collab-ready",d)}function d(){if(b.get("content-type")!=="page"&&b.get("content-type")!=="blogpost"){return}var h=a.$;var f="#inviteToEditLink";h("#rte-toolbar").prepend(h(document.createElement("div")).prop("id",f.replace("#","")).addClass("aui-button").addClass("invite-to-edit-button").html('<span class="invite-plus-icon"></span>').tooltip({title:function(){return "Invite people to edit with you"},gravity:"ne"}));var e=h(f);var g=b.get("content-type")==="page"?"Let\u0027s work together on this page":"Let\u0027s work together on this blog post";c.initDialog(f,"inviteToEditPopup",{},{heading:"Invite people to edit",notePlaceholder:g,link:function(){return require("confluence/share-page/fetch/content-info")(b.get("content-id"),"draft").pipe(function(i){return b.get("base-url")+i._links.edit})},entityId:function(){return b.get("draft-id")},restriction:function(){return require("confluence/share-page/fetch/content-restrictions")(b.get("content-id")).pipe(function(i){var k=i.read.restrictions.user.size||i.read.restrictions.group.size||i.update.restrictions.user.size||i.update.restrictions.group.size;var j={};if(k){j.type="restrict";j.message="Restrictions on this page may prevent people viewing or editing."}return j})},copyOption:"invite",shareType:"edit",contentType:b.get("content-type"),errorText:"An unexpected error occurred. Please try again.",beforeLoad:function(){e.find(".invite-plus-icon").css("visibility","hidden");e.spin()},afterLoad:function(){e.find(".invite-plus-icon").css("visibility","visible");e.spinStop()}})}});
}catch(e){WRMCB(e)};